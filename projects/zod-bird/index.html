<!DOCTYPE html><html lang="ar" dir="rtl" class="__variable_368abf __variable_364a63"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/moalarbi-portfolio1/_next/static/css/bf3b67282ae622e4.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="/moalarbi-portfolio1/_next/static/css/ccb12de4c58e29a3.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/moalarbi-portfolio1/_next/static/chunks/webpack-7aede6d79f56a0c2.js" crossorigin=""/><script src="/moalarbi-portfolio1/_next/static/chunks/e0d065d3-7c12bdfa4e9aac01.js" async="" crossorigin=""></script><script src="/moalarbi-portfolio1/_next/static/chunks/213-ebd7edce7bd8f80d.js" async="" crossorigin=""></script><script src="/moalarbi-portfolio1/_next/static/chunks/main-app-3b3e796a95e38971.js" async="" crossorigin=""></script><script src="/moalarbi-portfolio1/_next/static/chunks/app/layout-854e0d098fab093b.js" async=""></script><script src="/moalarbi-portfolio1/_next/static/chunks/627-2305de044010e1d9.js" async=""></script><script src="/moalarbi-portfolio1/_next/static/chunks/428-b3b3993ff492f857.js" async=""></script><script src="/moalarbi-portfolio1/_next/static/chunks/app/projects/%5Bslug%5D/page-792858a32482a6f2.js" async=""></script><title>moalarbi.com</title><meta name="description" content="Co-founder of unkey.dev and founder of planetfall.io"/><meta name="robots" content="index, follow"/><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"/><meta property="og:title" content="moalarbi.com"/><meta property="og:description" content="Co-founder of unkey.dev and founder of planetfall.io"/><meta property="og:url" content="https://moalarbi.com/"/><meta property="og:site_name" content="moalarbi.com"/><meta property="og:locale" content="en-US"/><meta property="og:image" content="https://moalarbi.com/og.png"/><meta property="og:image:width" content="1920"/><meta property="og:image:height" content="1080"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Chronark"/><meta name="twitter:description" content="Co-founder of unkey.dev and founder of planetfall.io"/><meta name="twitter:image" content="https://moalarbi.com/og.png"/><meta name="twitter:image:width" content="1920"/><meta name="twitter:image:height" content="1080"/><link rel="shortcut icon" href="/favicon.png"/><script src="/moalarbi-portfolio1/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body class="bg-black font-ibm "><div class="relative min-h-screen bg-gradient-to-tl from-zinc-900 via-zinc-400/10 to-zinc-900 "><div dir="rtl" lang="ar" class="bg-zinc-50 min-h-screen text-right"><header class="relative isolate overflow-hidden bg-gradient-to-tl from-black via-zinc-900 to-black"><div class="fixed inset-x-0 top-0 z-50 backdrop-blur lg:backdrop-blur-none duration-200 border-b lg:bg-transparent bg-zinc-900/0 border-transparent"><div class="container flex flex-row-reverse items-center justify-between p-6 mx-auto"><div class="flex justify-between gap-8"><span title="View counter for this page" class="duration-200 hover:font-medium flex items-center gap-1  text-zinc-400 hover:text-zinc-100 "><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path><circle cx="12" cy="12" r="3"></circle></svg> <!-- -->1.2K</span><a target="_blank" href="https://twitter.com/chronark_"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 duration-200 hover:font-medium  text-zinc-400 hover:text-zinc-100 "><path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path></svg></a><a target="_blank" href="https://github.com/chronark"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 duration-200 hover:font-medium  text-zinc-400 hover:text-zinc-100 "><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg></a></div><a class="duration-200 hover:font-medium  text-zinc-400 hover:text-zinc-100 " href="/moalarbi-portfolio1/projects/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 "><path d="m12 19-7-7 7-7"></path><path d="M19 12H5"></path></svg></a></div></div><div class="container mx-auto relative isolate overflow-hidden  py-24 sm:py-32"><div class="mx-auto max-w-7xl px-6 lg:px-8 text-center flex flex-col items-center"><div class="mx-auto max-w-2xl lg:mx-0"><h1 class="text-4xl font-bold tracking-tight text-white sm:text-6xl font-display">Zod Bird</h1><p class="mt-6 text-lg leading-8 text-zinc-300">Zodbird is an e2e typed tinybird.co client library for typescript, leveraging zod for type safety and transformations</p></div><div class="mx-auto mt-10 max-w-2xl lg:mx-0 lg:max-w-none"><div class="grid grid-cols-1 gap-y-6 gap-x-8 text-base font-semibold leading-7 text-white sm:grid-cols-2 md:flex lg:gap-x-10"><a target="_blank" href="https://github.com/chronark/zod-bird">GitHub<!-- --> <span aria-hidden="true">â†’</span></a></div></div></div></div></header><article class="px-4 py-12 mx-auto prose prose-zinc prose-quoteless"><div class="mdx"><ul class="my-6 ml-6 list-disc">
<li class="mt-2">typesafe</li>
<li class="mt-2">handles building the url params for you</li>
<li class="mt-2">easy transformation of resulting data</li>
<li class="mt-2">built in cache directives for nextjs</li>
<li class="mt-2">built in retry logic for ratelimited requests</li>
</ul>
<div data-rehype-pretty-code-fragment=""><pre class="mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark" style="background-color:#24292e" tabindex="0" data-language="ts" data-theme="default"><code class="relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600" data-language="ts" data-theme="default" style="display:grid"><span data-line=""><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Tinybird } </span><span style="color:#F97583">from</span><span style="color:#E1E4E8"> </span><span style="color:#9ECBFF">&quot;@chronark/zod-bird&quot;</span><span style="color:#E1E4E8">;</span></span>
<span data-line=""><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { z } </span><span style="color:#F97583">from</span><span style="color:#E1E4E8"> </span><span style="color:#9ECBFF">&quot;zod&quot;</span><span style="color:#E1E4E8">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#F97583">const</span><span style="color:#E1E4E8"> </span><span style="color:#79B8FF">tb</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">new</span><span style="color:#E1E4E8"> </span><span style="color:#B392F0">Tinybird</span><span style="color:#E1E4E8">({ token: </span><span style="color:#9ECBFF">&quot;token&quot;</span><span style="color:#E1E4E8"> });</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#F97583">export</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">const</span><span style="color:#E1E4E8"> </span><span style="color:#79B8FF">getEvents</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> tb.</span><span style="color:#B392F0">buildPipe</span><span style="color:#E1E4E8">({</span></span>
<span data-line=""><span style="color:#E1E4E8">  pipe: </span><span style="color:#9ECBFF">&quot;get_events__v1&quot;</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#E1E4E8">  parameters: z.</span><span style="color:#B392F0">object</span><span style="color:#E1E4E8">({</span></span>
<span data-line=""><span style="color:#E1E4E8">    tenantId: z.</span><span style="color:#B392F0">string</span><span style="color:#E1E4E8">(),</span></span>
<span data-line=""><span style="color:#E1E4E8">  }),</span></span>
<span data-line=""><span style="color:#E1E4E8">  data: z.</span><span style="color:#B392F0">object</span><span style="color:#E1E4E8">({</span></span>
<span data-line=""><span style="color:#E1E4E8">    event: z.</span><span style="color:#B392F0">string</span><span style="color:#E1E4E8">(),</span></span>
<span data-line=""><span style="color:#E1E4E8">    time: z.</span><span style="color:#B392F0">number</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">transform</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">t</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">new</span><span style="color:#E1E4E8"> </span><span style="color:#B392F0">Date</span><span style="color:#E1E4E8">(t)),</span></span>
<span data-line=""><span style="color:#E1E4E8">  }),</span></span>
<span data-line=""><span style="color:#E1E4E8">});</span></span>
<span data-line=""> </span>
<span data-line=""> </span>
<span data-line=""><span style="color:#F97583">const</span><span style="color:#E1E4E8"> </span><span style="color:#79B8FF">res</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">await</span><span style="color:#E1E4E8"> </span><span style="color:#B392F0">getEvents</span><span style="color:#E1E4E8">({ tenantId: </span><span style="color:#9ECBFF">&quot;chronark&quot;</span><span style="color:#E1E4E8"> })</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#6A737D">// res.data = {event: string, time: Date}[]</span></span></code></pre></div>
<h2 class="mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0" id="install"><a class="font-medium text-zinc-900 underline underline-offset-4 subheading-anchor" aria-label="Link to section" href="#install"><span class="icon icon-link"></span></a>Install</h2>
<div data-rehype-pretty-code-fragment=""><pre class="mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark" style="background-color:#24292e" tabindex="0" data-language="" data-theme="default"><code class="relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600" data-language="" data-theme="default" style="display:grid"><span data-line=""><span style="color:#e1e4e8">npm i @chronark/zod-bird</span></span></code></pre></div>
<h2 class="mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0" id="ingesting-data"><a class="font-medium text-zinc-900 underline underline-offset-4 subheading-anchor" aria-label="Link to section" href="#ingesting-data"><span class="icon icon-link"></span></a>Ingesting Data</h2>
<div data-rehype-pretty-code-fragment=""><pre class="mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark" style="background-color:#24292e" tabindex="0" data-language="ts" data-theme="default"><code class="relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600" data-language="ts" data-theme="default" style="display:grid"><span data-line=""><span style="color:#6A737D">// lib/tinybird.ts</span></span>
<span data-line=""><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Tinybird } </span><span style="color:#F97583">from</span><span style="color:#E1E4E8"> </span><span style="color:#9ECBFF">&quot;./client&quot;</span><span style="color:#E1E4E8">;</span></span>
<span data-line=""><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { z } </span><span style="color:#F97583">from</span><span style="color:#E1E4E8"> </span><span style="color:#9ECBFF">&quot;zod&quot;</span><span style="color:#E1E4E8">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#F97583">const</span><span style="color:#E1E4E8"> </span><span style="color:#79B8FF">tb</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">new</span><span style="color:#E1E4E8"> </span><span style="color:#B392F0">Tinybird</span><span style="color:#E1E4E8">({ token: process.env.</span><span style="color:#79B8FF">TINYBIRD_TOKEN</span><span style="color:#F97583">!</span><span style="color:#E1E4E8"> });</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#F97583">export</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">const</span><span style="color:#E1E4E8"> </span><span style="color:#79B8FF">publishEvent</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> tb.</span><span style="color:#B392F0">buildIngestEndpoint</span><span style="color:#E1E4E8">({</span></span>
<span data-line=""><span style="color:#E1E4E8">  datasource: </span><span style="color:#9ECBFF">&quot;events__v1&quot;</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#E1E4E8">  event: z.</span><span style="color:#B392F0">object</span><span style="color:#E1E4E8">({</span></span>
<span data-line=""><span style="color:#E1E4E8">    id: z.</span><span style="color:#B392F0">string</span><span style="color:#E1E4E8">(),</span></span>
<span data-line=""><span style="color:#E1E4E8">    tenantId: z.</span><span style="color:#B392F0">string</span><span style="color:#E1E4E8">(),</span></span>
<span data-line=""><span style="color:#E1E4E8">    channelId: z.</span><span style="color:#B392F0">string</span><span style="color:#E1E4E8">(),</span></span>
<span data-line=""><span style="color:#E1E4E8">    time: z.</span><span style="color:#B392F0">number</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">int</span><span style="color:#E1E4E8">(),</span></span>
<span data-line=""><span style="color:#E1E4E8">    event: z.</span><span style="color:#B392F0">string</span><span style="color:#E1E4E8">(),</span></span>
<span data-line=""><span style="color:#E1E4E8">    content: z.</span><span style="color:#B392F0">string</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">optional</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">default</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;&quot;</span><span style="color:#E1E4E8">),</span></span>
<span data-line=""><span style="color:#E1E4E8">    metadata: z.</span><span style="color:#B392F0">string</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">optional</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">default</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">&quot;&quot;</span><span style="color:#E1E4E8">),</span></span>
<span data-line=""><span style="color:#E1E4E8">  }),</span></span>
<span data-line=""><span style="color:#E1E4E8">});</span></span></code></pre></div>
<div data-rehype-pretty-code-fragment=""><pre class="mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark" style="background-color:#24292e" tabindex="0" data-language="ts" data-theme="default"><code class="relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600" data-language="ts" data-theme="default" style="display:grid"><span data-line=""><span style="color:#6A737D">// somewhere.ts</span></span>
<span data-line=""><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { publishEvent } </span><span style="color:#F97583">from</span><span style="color:#E1E4E8"> </span><span style="color:#9ECBFF">&quot;./lib/tinybird&quot;</span><span style="color:#E1E4E8">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#F97583">await</span><span style="color:#E1E4E8"> </span><span style="color:#B392F0">publishEvent</span><span style="color:#E1E4E8">({</span></span>
<span data-line=""><span style="color:#E1E4E8">  id: </span><span style="color:#9ECBFF">&quot;1&quot;</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#E1E4E8">  tenantId: </span><span style="color:#9ECBFF">&quot;1&quot;</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#E1E4E8">  channelId: </span><span style="color:#9ECBFF">&quot;1&quot;</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#E1E4E8">  time: Date.</span><span style="color:#B392F0">now</span><span style="color:#E1E4E8">(),</span></span>
<span data-line=""><span style="color:#E1E4E8">  event: </span><span style="color:#9ECBFF">&quot;test&quot;</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#E1E4E8">  content: </span><span style="color:#9ECBFF">&quot;test&quot;</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#E1E4E8">  metadata: </span><span style="color:#79B8FF">JSON</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">stringify</span><span style="color:#E1E4E8">({ test: </span><span style="color:#9ECBFF">&quot;test&quot;</span><span style="color:#E1E4E8"> }),</span></span>
<span data-line=""><span style="color:#E1E4E8">});</span></span></code></pre></div>
<h2 class="mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0" id="querying-endpoints"><a class="font-medium text-zinc-900 underline underline-offset-4 subheading-anchor" aria-label="Link to section" href="#querying-endpoints"><span class="icon icon-link"></span></a>Querying Endpoints</h2>
<div data-rehype-pretty-code-fragment=""><pre class="mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark" style="background-color:#24292e" tabindex="0" data-language="ts" data-theme="default"><code class="relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600" data-language="ts" data-theme="default" style="display:grid"><span data-line=""><span style="color:#6A737D">// lib/tinybird.ts</span></span>
<span data-line=""><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { Tinybird } </span><span style="color:#F97583">from</span><span style="color:#E1E4E8"> </span><span style="color:#9ECBFF">&quot;./client&quot;</span><span style="color:#E1E4E8">;</span></span>
<span data-line=""><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { z } </span><span style="color:#F97583">from</span><span style="color:#E1E4E8"> </span><span style="color:#9ECBFF">&quot;zod&quot;</span><span style="color:#E1E4E8">;</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#F97583">const</span><span style="color:#E1E4E8"> </span><span style="color:#79B8FF">tb</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">new</span><span style="color:#E1E4E8"> </span><span style="color:#B392F0">Tinybird</span><span style="color:#E1E4E8">({ token: process.env.</span><span style="color:#79B8FF">TINYBIRD_TOKEN</span><span style="color:#F97583">!</span><span style="color:#E1E4E8"> });</span></span>
<span data-line=""> </span>
<span data-line=""><span style="color:#F97583">export</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">const</span><span style="color:#E1E4E8"> </span><span style="color:#79B8FF">getChannelActivity</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> tb.</span><span style="color:#B392F0">buildPipe</span><span style="color:#E1E4E8">({</span></span>
<span data-line=""><span style="color:#E1E4E8">  pipe: </span><span style="color:#9ECBFF">&quot;get_channel_activity__v1&quot;</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#E1E4E8">  parameters: z.</span><span style="color:#B392F0">object</span><span style="color:#E1E4E8">({</span></span>
<span data-line=""><span style="color:#E1E4E8">    tenantId: z.</span><span style="color:#B392F0">string</span><span style="color:#E1E4E8">(),</span></span>
<span data-line=""><span style="color:#E1E4E8">    channelId: z.</span><span style="color:#B392F0">string</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">optional</span><span style="color:#E1E4E8">(),</span></span>
<span data-line=""><span style="color:#E1E4E8">    start: z.</span><span style="color:#B392F0">number</span><span style="color:#E1E4E8">(),</span></span>
<span data-line=""><span style="color:#E1E4E8">    end: z.</span><span style="color:#B392F0">number</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">optional</span><span style="color:#E1E4E8">(),</span></span>
<span data-line=""><span style="color:#E1E4E8">    granularity: z.</span><span style="color:#B392F0">enum</span><span style="color:#E1E4E8">([</span><span style="color:#9ECBFF">&quot;1m&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&quot;1h&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&quot;1d&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&quot;1w&quot;</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">&quot;1M&quot;</span><span style="color:#E1E4E8">]),</span></span>
<span data-line=""><span style="color:#E1E4E8">  }),</span></span>
<span data-line=""><span style="color:#E1E4E8">  data: z.</span><span style="color:#B392F0">object</span><span style="color:#E1E4E8">({</span></span>
<span data-line=""><span style="color:#E1E4E8">    time: z.</span><span style="color:#B392F0">string</span><span style="color:#E1E4E8">().</span><span style="color:#B392F0">transform</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">t</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">new</span><span style="color:#E1E4E8"> </span><span style="color:#B392F0">Date</span><span style="color:#E1E4E8">(t).</span><span style="color:#B392F0">getTime</span><span style="color:#E1E4E8">()),</span></span>
<span data-line=""><span style="color:#E1E4E8">    count: z</span></span>
<span data-line=""><span style="color:#E1E4E8">      .</span><span style="color:#B392F0">number</span><span style="color:#E1E4E8">()</span></span>
<span data-line=""><span style="color:#E1E4E8">      .</span><span style="color:#B392F0">nullable</span><span style="color:#E1E4E8">()</span></span>
<span data-line=""><span style="color:#E1E4E8">      .</span><span style="color:#B392F0">optional</span><span style="color:#E1E4E8">()</span></span>
<span data-line=""><span style="color:#E1E4E8">      .</span><span style="color:#B392F0">transform</span><span style="color:#E1E4E8">((</span><span style="color:#FFAB70">v</span><span style="color:#E1E4E8">) </span><span style="color:#F97583">=&gt;</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">typeof</span><span style="color:#E1E4E8"> v </span><span style="color:#F97583">===</span><span style="color:#E1E4E8"> </span><span style="color:#9ECBFF">&quot;number&quot;</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">?</span><span style="color:#E1E4E8"> v </span><span style="color:#F97583">:</span><span style="color:#E1E4E8"> </span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">)),</span></span>
<span data-line=""><span style="color:#E1E4E8">  }),</span></span>
<span data-line=""><span style="color:#E1E4E8">});</span></span></code></pre></div>
<div data-rehype-pretty-code-fragment=""><pre class="mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark" style="background-color:#24292e" tabindex="0" data-language="ts" data-theme="default"><code class="relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600" data-language="ts" data-theme="default" style="display:grid"><span data-line=""><span style="color:#6A737D">// somewhere.ts</span></span>
<span data-line=""><span style="color:#F97583">import</span><span style="color:#E1E4E8"> { getChannelActivity } </span><span style="color:#F97583">from</span><span style="color:#E1E4E8"> </span><span style="color:#9ECBFF">&quot;./lib/tinybird&quot;</span><span style="color:#E1E4E8">;</span></span>
<span data-line=""> </span>
<span data-line=""> </span>
<span data-line=""><span style="color:#F97583">const</span><span style="color:#E1E4E8"> </span><span style="color:#79B8FF">res</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> </span><span style="color:#F97583">await</span><span style="color:#E1E4E8"> </span><span style="color:#B392F0">getChannelActivity</span><span style="color:#E1E4E8">({</span></span>
<span data-line=""><span style="color:#E1E4E8">   tenantId: </span><span style="color:#9ECBFF">&quot;1&quot;</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#E1E4E8">   channelId: </span><span style="color:#9ECBFF">&quot;1&quot;</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#E1E4E8">   start: </span><span style="color:#79B8FF">123</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#E1E4E8">   end: </span><span style="color:#79B8FF">1234</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#E1E4E8">   granularity: </span><span style="color:#9ECBFF">&quot;1h&quot;</span></span>
<span data-line=""><span style="color:#E1E4E8">})</span></span>
<span data-line=""> </span></code></pre></div>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6"><code class="relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600">res</code> is the response from the tinybird endpoint, but now fully typed and the data has been parsed according to the schema defined in <code class="relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600">data</code>.</p>
<h2 class="mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0" id="advanced"><a class="font-medium text-zinc-900 underline underline-offset-4 subheading-anchor" aria-label="Link to section" href="#advanced"><span class="icon icon-link"></span></a>Advanced</h2>
<h3 class="mt-8 scroll-m-20 text-2xl font-semibold tracking-tight" id="caching"><a class="font-medium text-zinc-900 underline underline-offset-4 subheading-anchor" aria-label="Link to section" href="#caching"><span class="icon icon-link"></span></a>Caching</h3>
<p class="leading-7 [&amp;:not(:first-child)]:mt-6">You can add cache directives to each pipe.</p>
<h4 class="mt-8 scroll-m-20 text-xl font-semibold tracking-tight" id="disable-caching-useful-in-nextjs-where-everything-is-cached-by-default"><a class="font-medium text-zinc-900 underline underline-offset-4 subheading-anchor" aria-label="Link to section" href="#disable-caching-useful-in-nextjs-where-everything-is-cached-by-default"><span class="icon icon-link"></span></a>Disable caching (useful in Next.js where everything is cached by default)</h4>
<div data-rehype-pretty-code-fragment=""><pre class="mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark" style="background-color:#24292e" tabindex="0" data-language="ts" data-theme="default"><code class="relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600" data-language="ts" data-theme="default" style="display:grid"><span data-line=""><span style="color:#E1E4E8">tb.</span><span style="color:#B392F0">buildPipe</span><span style="color:#E1E4E8">({</span></span>
<span data-line=""><span style="color:#E1E4E8">  pipe: </span><span style="color:#9ECBFF">&quot;some_pipe__v1&quot;</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#E1E4E8">  parameters: z.</span><span style="color:#B392F0">object</span><span style="color:#E1E4E8">({</span></span>
<span data-line=""><span style="color:#E1E4E8">   hello: z.</span><span style="color:#B392F0">string</span><span style="color:#E1E4E8">()</span></span>
<span data-line=""><span style="color:#E1E4E8">  }),</span></span>
<span data-line=""><span style="color:#E1E4E8">  data: z.</span><span style="color:#B392F0">object</span><span style="color:#E1E4E8">({</span></span>
<span data-line=""><span style="color:#E1E4E8">    response: z.</span><span style="color:#B392F0">string</span><span style="color:#E1E4E8">()</span></span>
<span data-line=""><span style="color:#E1E4E8">  }),</span></span>
<span data-line=""><span style="color:#E1E4E8">   opts: {</span></span>
<span data-line=""><span style="color:#E1E4E8">      cache: </span><span style="color:#9ECBFF">&quot;no-store&quot;</span><span style="color:#E1E4E8"> </span><span style="color:#6A737D">// &lt;-------- Add this</span></span>
<span data-line=""><span style="color:#E1E4E8">   };</span></span>
<span data-line=""><span style="color:#E1E4E8">});</span></span>
<span data-line=""> </span></code></pre></div>
<h4 class="mt-8 scroll-m-20 text-xl font-semibold tracking-tight" id="cache-for-15-minutes"><a class="font-medium text-zinc-900 underline underline-offset-4 subheading-anchor" aria-label="Link to section" href="#cache-for-15-minutes"><span class="icon icon-link"></span></a>Cache for 15 minutes</h4>
<div data-rehype-pretty-code-fragment=""><pre class="mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark" style="background-color:#24292e" tabindex="0" data-language="ts" data-theme="default"><code class="relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600" data-language="ts" data-theme="default" style="display:grid"><span data-line=""> </span>
<span data-line=""><span style="color:#E1E4E8">tb.</span><span style="color:#B392F0">buildPipe</span><span style="color:#E1E4E8">({</span></span>
<span data-line=""><span style="color:#E1E4E8">  pipe: </span><span style="color:#9ECBFF">&quot;some_pipe__v1&quot;</span><span style="color:#E1E4E8">,</span></span>
<span data-line=""><span style="color:#E1E4E8">  parameters: z.</span><span style="color:#B392F0">object</span><span style="color:#E1E4E8">({</span></span>
<span data-line=""><span style="color:#E1E4E8">   hello: z.</span><span style="color:#B392F0">string</span><span style="color:#E1E4E8">()</span></span>
<span data-line=""><span style="color:#E1E4E8">  }),</span></span>
<span data-line=""><span style="color:#E1E4E8">  data: z.</span><span style="color:#B392F0">object</span><span style="color:#E1E4E8">({</span></span>
<span data-line=""><span style="color:#E1E4E8">    response: z.</span><span style="color:#B392F0">string</span><span style="color:#E1E4E8">()</span></span>
<span data-line=""><span style="color:#E1E4E8">  }),</span></span>
<span data-line=""><span style="color:#E1E4E8">   opts: {</span></span>
<span data-line=""><span style="color:#E1E4E8">      revalidate: </span><span style="color:#79B8FF">900</span><span style="color:#E1E4E8"> ;</span><span style="color:#6A737D">// &lt;-------- Add this</span></span>
<span data-line=""><span style="color:#E1E4E8">    };</span></span>
<span data-line=""><span style="color:#E1E4E8">});</span></span></code></pre></div></div></article></div></div><script src="/moalarbi-portfolio1/_next/static/chunks/webpack-7aede6d79f56a0c2.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/moalarbi-portfolio1/_next/static/css/bf3b67282ae622e4.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:HL[\"/moalarbi-portfolio1/_next/static/css/ccb12de4c58e29a3.css\",\"style\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"4:I[7632,[],\"\"]\n6:I[2073,[],\"\"]\n7:I[4256,[\"185\",\"static/chunks/app/layout-854e0d098fab093b.js\"],\"Analytics\"]\n8:I[1442,[],\"\"]\n9:I[8733,[],\"\"]\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/moalarbi-portfolio1/_next/static/css/bf3b67282ae622e4.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"jHFRI1hbc4sPCTkgfETlV\",\"assetPrefix\":\"/moalarbi-portfolio1\",\"initialCanonicalUrl\":\"/projects/zod-bird/\",\"initialTree\":[\"\",{\"children\":[\"projects\",{\"children\":[[\"slug\",\"zod-bird\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"zod-bird\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[false,\"$L5\"],\"globalErrorComponent\":\"$6\",\"children\":[null,[\"$\",\"html\",null,{\"lang\":\"ar\",\"dir\":\"rtl\",\"className\":\"__variable_368abf __variable_364a63\",\"children\":[[\"$\",\"head\",null,{\"children\":[\"$\",\"$L7\",null,{}]}],[\"$\",\"body\",null,{\"className\":\"bg-black font-ibm \",\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"childProp\":{\"current\":[null,[\"$\",\"div\",null,{\"className\":\"relative min-h-screen bg-gradient-to-tl from-zinc-900 via-zinc-400/10 to-zinc-900 \",\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"projects\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"projects\",\"children\",[\"slug\",\"zod-bird\",\"d\"],\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$La\",\"$Lb\",null],\"segment\":\"__PAGE__?{\\\"slug\\\":\\\"zod-bird\\\"}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/moalarbi-portfolio1/_next/static/css/ccb12de4c58e29a3.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}],\"segment\":[\"slug\",\"zod-bird\",\"d\"]},\"styles\":[]}]}],null],\"segment\":\"projects\"},\"styles\":[]}]}]]}],null]}]]\n"])</script><script>self.__next_f.push([1,"c:I[9762,[\"627\",\"static/chunks/627-2305de044010e1d9.js\",\"428\",\"static/chunks/428-b3b3993ff492f857.js\",\"101\",\"static/chunks/app/projects/%5Bslug%5D/page-792858a32482a6f2.js\"],\"Header\"]\nf:I[428,[\"627\",\"static/chunks/627-2305de044010e1d9.js\",\"428\",\"static/chunks/428-b3b3993ff492f857.js\",\"101\",\"static/chunks/app/projects/%5Bslug%5D/page-792858a32482a6f2.js\"],\"\"]\nd:Tc21,"])</script><script>self.__next_f.push([1,"\n- typesafe\n- handles building the url params for you\n- easy transformation of resulting data\n- built in cache directives for nextjs\n- built in retry logic for ratelimited requests\n\n\n```ts\nimport { Tinybird } from \"@chronark/zod-bird\";\nimport { z } from \"zod\";\n\nconst tb = new Tinybird({ token: \"token\" });\n\nexport const getEvents = tb.buildPipe({\n  pipe: \"get_events__v1\",\n  parameters: z.object({\n    tenantId: z.string(),\n  }),\n  data: z.object({\n    event: z.string(),\n    time: z.number().transform((t) =\u003e new Date(t)),\n  }),\n});\n\n\nconst res = await getEvents({ tenantId: \"chronark\" })\n\n// res.data = {event: string, time: Date}[]\n```\n\n## Install\n\n```\nnpm i @chronark/zod-bird\n```\n\n\n## Ingesting Data\n\n```ts\n// lib/tinybird.ts\nimport { Tinybird } from \"./client\";\nimport { z } from \"zod\";\n\nconst tb = new Tinybird({ token: process.env.TINYBIRD_TOKEN! });\n\nexport const publishEvent = tb.buildIngestEndpoint({\n  datasource: \"events__v1\",\n  event: z.object({\n    id: z.string(),\n    tenantId: z.string(),\n    channelId: z.string(),\n    time: z.number().int(),\n    event: z.string(),\n    content: z.string().optional().default(\"\"),\n    metadata: z.string().optional().default(\"\"),\n  }),\n});\n```\n\n```ts\n// somewhere.ts\nimport { publishEvent } from \"./lib/tinybird\";\n\nawait publishEvent({\n  id: \"1\",\n  tenantId: \"1\",\n  channelId: \"1\",\n  time: Date.now(),\n  event: \"test\",\n  content: \"test\",\n  metadata: JSON.stringify({ test: \"test\" }),\n});\n```\n\n\n\n## Querying Endpoints\n\n```ts\n// lib/tinybird.ts\nimport { Tinybird } from \"./client\";\nimport { z } from \"zod\";\n\nconst tb = new Tinybird({ token: process.env.TINYBIRD_TOKEN! });\n\nexport const getChannelActivity = tb.buildPipe({\n  pipe: \"get_channel_activity__v1\",\n  parameters: z.object({\n    tenantId: z.string(),\n    channelId: z.string().optional(),\n    start: z.number(),\n    end: z.number().optional(),\n    granularity: z.enum([\"1m\", \"1h\", \"1d\", \"1w\", \"1M\"]),\n  }),\n  data: z.object({\n    time: z.string().transform((t) =\u003e new Date(t).getTime()),\n    count: z\n      .number()\n      .nullable()\n      .optional()\n      .transform((v) =\u003e (typeof v === \"number\" ? v : 0)),\n  }),\n});\n```\n\n```ts\n// somewhere.ts\nimport { getChannelActivity } from \"./lib/tinybird\";\n\n\nconst res = await getChannelActivity({\n   tenantId: \"1\",\n   channelId: \"1\",\n   start: 123,\n   end: 1234,\n   granularity: \"1h\"\n})\n\n```\n`res` is the response from the tinybird endpoint, but now fully typed and the data has been parsed according to the schema defined in `data`.\n\n## Advanced\n\n### Caching\n\nYou can add cache directives to each pipe.\n\n\n#### Disable caching (useful in Next.js where everything is cached by default)\n\n```ts\ntb.buildPipe({\n  pipe: \"some_pipe__v1\",\n  parameters: z.object({\n   hello: z.string()\n  }),\n  data: z.object({\n    response: z.string()\n  }),\n   opts: {\n      cache: \"no-store\" // \u003c-------- Add this\n   };\n});\n\n```\n\n#### Cache for 15 minutes\n\n```ts\n\ntb.buildPipe({\n  pipe: \"some_pipe__v1\",\n  parameters: z.object({\n   hello: z.string()\n  }),\n  data: z.object({\n    response: z.string()\n  }),\n   opts: {\n      revalidate: 900 ;// \u003c-------- Add this\n    };\n});\n"])</script><script>self.__next_f.push([1,"e:T8f88,"])</script><script>self.__next_f.push([1,"var Component=(()=\u003e{var E=Object.create;var a=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var g=(e,l)=\u003e()=\u003e(l||e((l={exports:{}}).exports,l),l.exports),u=(e,l)=\u003e{for(var r in l)a(e,r,{get:l[r],enumerable:!0})},o=(e,l,r,c)=\u003e{if(l\u0026\u0026typeof l==\"object\"||typeof l==\"function\")for(let s of p(l))!F.call(e,s)\u0026\u0026s!==r\u0026\u0026a(e,s,{get:()=\u003el[s],enumerable:!(c=h(l,s))||c.enumerable});return e};var B=(e,l,r)=\u003e(r=e!=null?E(y(e)):{},o(l||!e||!e.__esModule?a(r,\"default\",{value:e,enumerable:!0}):r,e)),m=e=\u003eo(a({},\"__esModule\",{value:!0}),e);var t=g((k,i)=\u003e{i.exports=_jsx_runtime});var v={};u(v,{default:()=\u003eC,frontmatter:()=\u003eb});var n=B(t()),b={title:\"Zod Bird\",description:\"Zodbird is an e2e typed tinybird.co client library for typescript, leveraging zod for type safety and transformations\",repository:\"chronark/zod-bird\",date:\"2023-05-21\",published:!0};function d(e){let l=Object.assign({ul:\"ul\",li:\"li\",div:\"div\",pre:\"pre\",code:\"code\",span:\"span\",h2:\"h2\",a:\"a\",p:\"p\",h3:\"h3\",h4:\"h4\"},e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsx)(l.li,{children:\"typesafe\"}),`\n`,(0,n.jsx)(l.li,{children:\"handles building the url params for you\"}),`\n`,(0,n.jsx)(l.li,{children:\"easy transformation of resulting data\"}),`\n`,(0,n.jsx)(l.li,{children:\"built in cache directives for nextjs\"}),`\n`,(0,n.jsx)(l.li,{children:\"built in retry logic for ratelimited requests\"}),`\n`]}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{className:\"github-dark\",style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(l.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { Tinybird } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"@chronark/zod-bird\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { z } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"zod\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"tb\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"Tinybird\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ token: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"token\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"getEvents\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" tb.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"buildPipe\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  pipe: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"get_events__v1\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  parameters: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"object\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    tenantId: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }),\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  data: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"object\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    event: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    time: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"transform\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"t\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\u003e\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"Date\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(t)),\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }),\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"getEvents\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ tenantId: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"chronark\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" })\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// res.data = {event: string, time: Date}[]\"})})]})})}),`\n`,(0,n.jsxs)(l.h2,{id:\"install\",children:[(0,n.jsx)(l.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#install\",children:(0,n.jsx)(l.span,{className:\"icon icon-link\"})}),\"Install\"]}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{className:\"github-dark\",style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"\",\"data-theme\":\"default\",children:(0,n.jsx)(l.code,{\"data-language\":\"\",\"data-theme\":\"default\",style:{display:\"grid\"},children:(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#e1e4e8\"},children:\"npm i @chronark/zod-bird\"})})})})}),`\n`,(0,n.jsxs)(l.h2,{id:\"ingesting-data\",children:[(0,n.jsx)(l.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#ingesting-data\",children:(0,n.jsx)(l.span,{className:\"icon icon-link\"})}),\"Ingesting Data\"]}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{className:\"github-dark\",style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(l.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",style:{display:\"grid\"},children:[(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// lib/tinybird.ts\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { Tinybird } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"./client\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { z } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"zod\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"tb\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"Tinybird\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ token: process.env.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"TINYBIRD_TOKEN\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"publishEvent\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" tb.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"buildIngestEndpoint\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  datasource: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"events__v1\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  event: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"object\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    id: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    tenantId: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    channelId: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    time: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"int\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    event: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    content: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"optional\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"default\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    metadata: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"optional\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"default\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"),\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }),\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{className:\"github-dark\",style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(l.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",style:{display:\"grid\"},children:[(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// somewhere.ts\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { publishEvent } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"./lib/tinybird\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"publishEvent\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  id: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"1\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  tenantId: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"1\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  channelId: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"1\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  time: Date.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"now\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  event: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"test\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  content: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"test\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  metadata: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"JSON\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"stringify\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ test: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"test\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" }),\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(l.h2,{id:\"querying-endpoints\",children:[(0,n.jsx)(l.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#querying-endpoints\",children:(0,n.jsx)(l.span,{className:\"icon icon-link\"})}),\"Querying Endpoints\"]}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{className:\"github-dark\",style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(l.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",style:{display:\"grid\"},children:[(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// lib/tinybird.ts\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { Tinybird } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"./client\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { z } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"zod\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"tb\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"Tinybird\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({ token: process.env.\"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"TINYBIRD_TOKEN\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"!\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" });\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"export\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"getChannelActivity\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" tb.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"buildPipe\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  pipe: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"get_channel_activity__v1\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  parameters: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"object\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    tenantId: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    channelId: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"optional\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    start: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    end: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"optional\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(),\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    granularity: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"enum\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"([\"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"1m\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"1h\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"1d\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"1w\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\", \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"1M\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"]),\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }),\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  data: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"object\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    time: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"().\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"transform\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"t\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\u003e\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"new\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"Date\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"(t).\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"getTime\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()),\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    count: z\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"number\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"nullable\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"optional\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      .\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"transform\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFAB70\"},children:\"v\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\") \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\u003e\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" (\"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"typeof\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" v \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"===\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"number\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"?\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" v \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"0\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\")),\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }),\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{className:\"github-dark\",style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(l.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",style:{display:\"grid\"},children:[(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// somewhere.ts\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" { getChannelActivity } \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"./lib/tinybird\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"res\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#F97583\"},children:\"await\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"getChannelActivity\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"   tenantId: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"1\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"   channelId: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"1\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"   start: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"123\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"   end: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"1234\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"   granularity: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"1h\"'})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"})\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.code,{children:\"res\"}),\" is the response from the tinybird endpoint, but now fully typed and the data has been parsed according to the schema defined in \",(0,n.jsx)(l.code,{children:\"data\"}),\".\"]}),`\n`,(0,n.jsxs)(l.h2,{id:\"advanced\",children:[(0,n.jsx)(l.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#advanced\",children:(0,n.jsx)(l.span,{className:\"icon icon-link\"})}),\"Advanced\"]}),`\n`,(0,n.jsxs)(l.h3,{id:\"caching\",children:[(0,n.jsx)(l.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#caching\",children:(0,n.jsx)(l.span,{className:\"icon icon-link\"})}),\"Caching\"]}),`\n`,(0,n.jsx)(l.p,{children:\"You can add cache directives to each pipe.\"}),`\n`,(0,n.jsxs)(l.h4,{id:\"disable-caching-useful-in-nextjs-where-everything-is-cached-by-default\",children:[(0,n.jsx)(l.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#disable-caching-useful-in-nextjs-where-everything-is-cached-by-default\",children:(0,n.jsx)(l.span,{className:\"icon icon-link\"})}),\"Disable caching (useful in Next.js where everything is cached by default)\"]}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{className:\"github-dark\",style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(l.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",style:{display:\"grid\"},children:[(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"tb.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"buildPipe\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  pipe: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"some_pipe__v1\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  parameters: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"object\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"   hello: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }),\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  data: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"object\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    response: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }),\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"   opts: {\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      cache: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"no-store\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" \"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \u003c-------- Add this\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"   };\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"})]})})}),`\n`,(0,n.jsxs)(l.h4,{id:\"cache-for-15-minutes\",children:[(0,n.jsx)(l.a,{className:\"subheading-anchor\",\"aria-label\":\"Link to section\",href:\"#cache-for-15-minutes\",children:(0,n.jsx)(l.span,{className:\"icon icon-link\"})}),\"Cache for 15 minutes\"]}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{className:\"github-dark\",style:{backgroundColor:\"#24292e\"},tabIndex:\"0\",\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(l.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",style:{display:\"grid\"},children:[(0,n.jsx)(l.span,{\"data-line\":\"\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"tb.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"buildPipe\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  pipe: \"}),(0,n.jsx)(l.span,{style:{color:\"#9ECBFF\"},children:'\"some_pipe__v1\"'}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  parameters: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"object\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"   hello: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }),\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  data: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"object\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    response: z.\"}),(0,n.jsx)(l.span,{style:{color:\"#B392F0\"},children:\"string\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"()\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"  }),\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"   opts: {\"})}),`\n`,(0,n.jsxs)(l.span,{\"data-line\":\"\",children:[(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"      revalidate: \"}),(0,n.jsx)(l.span,{style:{color:\"#79B8FF\"},children:\"900\"}),(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\" ;\"}),(0,n.jsx)(l.span,{style:{color:\"#6A737D\"},children:\"// \u003c-------- Add this\"})]}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"    };\"})}),`\n`,(0,n.jsx)(l.span,{\"data-line\":\"\",children:(0,n.jsx)(l.span,{style:{color:\"#E1E4E8\"},children:\"});\"})})]})})})]})}function f(e={}){let{wrapper:l}=e.components||{};return l?(0,n.jsx)(l,Object.assign({},e,{children:(0,n.jsx)(d,e)})):d(e)}var C=f;return m(v);})();\n;return Component;"])</script><script>self.__next_f.push([1,"b:[\"$\",\"div\",null,{\"dir\":\"rtl\",\"lang\":\"ar\",\"className\":\"bg-zinc-50 min-h-screen text-right\",\"children\":[[\"$\",\"$Lc\",null,{\"project\":{\"published\":true,\"title\":\"Zod Bird\",\"description\":\"Zodbird is an e2e typed tinybird.co client library for typescript, leveraging zod for type safety and transformations\",\"date\":\"2023-05-21T00:00:00.000Z\",\"repository\":\"chronark/zod-bird\",\"body\":{\"raw\":\"$d\",\"code\":\"$e\"},\"_id\":\"projects/zod-bird.mdx\",\"_raw\":{\"sourceFilePath\":\"projects/zod-bird.mdx\",\"sourceFileName\":\"zod-bird.mdx\",\"sourceFileDir\":\"projects\",\"contentType\":\"mdx\",\"flattenedPath\":\"projects/zod-bird\"},\"type\":\"Project\",\"path\":\"/projects/zod-bird\",\"slug\":\"zod-bird\"},\"views\":1234}],[\"$\",\"article\",null,{\"className\":\"px-4 py-12 mx-auto prose prose-zinc prose-quoteless\",\"children\":[\"$\",\"div\",null,{\"className\":\"mdx\",\"children\":[[\"$\",\"ul\",null,{\"className\":\"my-6 ml-6 list-disc\",\"children\":[\"\\n\",[\"$\",\"li\",null,{\"className\":\"mt-2\",\"children\":\"typesafe\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"mt-2\",\"children\":\"handles building the url params for you\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"mt-2\",\"children\":\"easy transformation of resulting data\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"mt-2\",\"children\":\"built in cache directives for nextjs\"}],\"\\n\",[\"$\",\"li\",null,{\"className\":\"mt-2\",\"children\":\"built in retry logic for ratelimited requests\"}],\"\\n\"]}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark\",\"style\":{\"backgroundColor\":\"#24292e\"},\"tabIndex\":\"0\",\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"className\":\"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600\",\"data-language\":\"ts\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" { Tinybird } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"@chronark/zod-bird\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" { z } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"zod\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\"},\"children\":\"tb\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"Tinybird\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({ token: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"token\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" });\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"export\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\"},\"children\":\"getEvents\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" tb.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"buildPipe\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  pipe: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"get_events__v1\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  parameters: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"object\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    tenantId: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"string\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  }),\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  data: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"object\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    event: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"string\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    time: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"number\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"().\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"transform\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#FFAB70\"},\"children\":\"t\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"Date\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(t)),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  }),\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"});\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\"},\"children\":\"res\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"await\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"getEvents\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({ tenantId: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"chronark\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" })\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\"},\"children\":\"// res.data = {event: string, time: Date}[]\"}]}]]}]}]}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0\",\"id\":\"install\",\"children\":[[\"$\",\"$Lf\",null,{\"className\":\"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#install\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Install\"]}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark\",\"style\":{\"backgroundColor\":\"#24292e\"},\"tabIndex\":\"0\",\"data-language\":\"\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"className\":\"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600\",\"data-language\":\"\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#e1e4e8\"},\"children\":\"npm i @chronark/zod-bird\"}]}]}]}]}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0\",\"id\":\"ingesting-data\",\"children\":[[\"$\",\"$Lf\",null,{\"className\":\"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#ingesting-data\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Ingesting Data\"]}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark\",\"style\":{\"backgroundColor\":\"#24292e\"},\"tabIndex\":\"0\",\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"className\":\"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600\",\"data-language\":\"ts\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\"},\"children\":\"// lib/tinybird.ts\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" { Tinybird } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"./client\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" { z } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"zod\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\"},\"children\":\"tb\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"Tinybird\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({ token: process.env.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\"},\"children\":\"TINYBIRD_TOKEN\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"!\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" });\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"export\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\"},\"children\":\"publishEvent\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" tb.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"buildIngestEndpoint\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  datasource: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"events__v1\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  event: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"object\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    id: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"string\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    tenantId: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"string\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    channelId: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"string\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    time: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"number\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"().\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"int\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    event: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"string\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    content: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"string\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"().\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"optional\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"().\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"default\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    metadata: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"string\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"().\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"optional\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"().\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"default\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  }),\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"});\"}]}]]}]}]}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark\",\"style\":{\"backgroundColor\":\"#24292e\"},\"tabIndex\":\"0\",\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"className\":\"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600\",\"data-language\":\"ts\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\"},\"children\":\"// somewhere.ts\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" { publishEvent } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"./lib/tinybird\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"await\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"publishEvent\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  id: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"1\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  tenantId: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"1\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  channelId: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"1\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  time: Date.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"now\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  event: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"test\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  content: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"test\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  metadata: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\"},\"children\":\"JSON\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\".\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"stringify\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({ test: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"test\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" }),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"});\"}]}]]}]}]}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0\",\"id\":\"querying-endpoints\",\"children\":[[\"$\",\"$Lf\",null,{\"className\":\"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#querying-endpoints\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Querying Endpoints\"]}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark\",\"style\":{\"backgroundColor\":\"#24292e\"},\"tabIndex\":\"0\",\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"className\":\"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600\",\"data-language\":\"ts\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\"},\"children\":\"// lib/tinybird.ts\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" { Tinybird } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"./client\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" { z } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"zod\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\"},\"children\":\"tb\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"Tinybird\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({ token: process.env.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\"},\"children\":\"TINYBIRD_TOKEN\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"!\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" });\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"export\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\"},\"children\":\"getChannelActivity\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" tb.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"buildPipe\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  pipe: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"get_channel_activity__v1\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  parameters: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"object\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    tenantId: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"string\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    channelId: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"string\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"().\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"optional\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    start: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"number\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    end: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"number\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"().\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"optional\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    granularity: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"enum\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"([\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"1m\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"1h\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"1d\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"1w\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\", \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"1M\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"]),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  }),\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  data: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"object\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    time: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"string\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"().\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"transform\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#FFAB70\"},\"children\":\"t\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"new\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"Date\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"(t).\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"getTime\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"()),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    count: z\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"      .\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"number\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"      .\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"nullable\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"      .\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"optional\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"      .\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"transform\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"((\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#FFAB70\"},\"children\":\"v\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\") \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"=\u003e\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" (\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"typeof\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" v \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"===\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"number\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"?\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" v \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\":\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\"},\"children\":\"0\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\")),\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  }),\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"});\"}]}]]}]}]}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark\",\"style\":{\"backgroundColor\":\"#24292e\"},\"tabIndex\":\"0\",\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"className\":\"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600\",\"data-language\":\"ts\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\"},\"children\":\"// somewhere.ts\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"import\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" { getChannelActivity } \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"from\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"./lib/tinybird\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\";\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"const\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\"},\"children\":\"res\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"=\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#F97583\"},\"children\":\"await\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"getChannelActivity\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"   tenantId: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"1\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"   channelId: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"1\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"   start: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\"},\"children\":\"123\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"   end: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\"},\"children\":\"1234\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"   granularity: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"1h\\\"\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"})\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}]]}]}]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"leading-7 [\u0026:not(:first-child)]:mt-6\",\"children\":[[\"$\",\"code\",null,{\"className\":\"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600\",\"children\":\"res\"}],\" is the response from the tinybird endpoint, but now fully typed and the data has been parsed according to the schema defined in \",[\"$\",\"code\",null,{\"className\":\"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600\",\"children\":\"data\"}],\".\"]}],\"\\n\",[\"$\",\"h2\",null,{\"className\":\"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0\",\"id\":\"advanced\",\"children\":[[\"$\",\"$Lf\",null,{\"className\":\"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#advanced\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Advanced\"]}],\"\\n\",[\"$\",\"h3\",null,{\"className\":\"mt-8 scroll-m-20 text-2xl font-semibold tracking-tight\",\"id\":\"caching\",\"children\":[[\"$\",\"$Lf\",null,{\"className\":\"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#caching\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Caching\"]}],\"\\n\",[\"$\",\"p\",null,{\"className\":\"leading-7 [\u0026:not(:first-child)]:mt-6\",\"children\":\"You can add cache directives to each pipe.\"}],\"\\n\",[\"$\",\"h4\",null,{\"className\":\"mt-8 scroll-m-20 text-xl font-semibold tracking-tight\",\"id\":\"disable-caching-useful-in-nextjs-where-everything-is-cached-by-default\",\"children\":[[\"$\",\"$Lf\",null,{\"className\":\"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#disable-caching-useful-in-nextjs-where-everything-is-cached-by-default\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Disable caching (useful in Next.js where everything is cached by default)\"]}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark\",\"style\":{\"backgroundColor\":\"#24292e\"},\"tabIndex\":\"0\",\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"className\":\"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600\",\"data-language\":\"ts\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"tb.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"buildPipe\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  pipe: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"some_pipe__v1\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  parameters: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"object\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"   hello: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"string\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  }),\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  data: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"object\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    response: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"string\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  }),\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"   opts: {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"      cache: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"no-store\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\"},\"children\":\"// \u003c-------- Add this\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"   };\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"});\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}]]}]}]}],\"\\n\",[\"$\",\"h4\",null,{\"className\":\"mt-8 scroll-m-20 text-xl font-semibold tracking-tight\",\"id\":\"cache-for-15-minutes\",\"children\":[[\"$\",\"$Lf\",null,{\"className\":\"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor\",\"aria-label\":\"Link to section\",\"href\":\"#cache-for-15-minutes\",\"children\":[\"$\",\"span\",null,{\"className\":\"icon icon-link\"}]}],\"Cache for 15 minutes\"]}],\"\\n\",[\"$\",\"div\",null,{\"data-rehype-pretty-code-fragment\":\"\",\"children\":[\"$\",\"pre\",null,{\"className\":\"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark\",\"style\":{\"backgroundColor\":\"#24292e\"},\"tabIndex\":\"0\",\"data-language\":\"ts\",\"data-theme\":\"default\",\"children\":[\"$\",\"code\",null,{\"className\":\"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600\",\"data-language\":\"ts\",\"data-theme\":\"default\",\"style\":{\"display\":\"grid\"},\"children\":[[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":\" \"}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"tb.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"buildPipe\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  pipe: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#9ECBFF\"},\"children\":\"\\\"some_pipe__v1\\\"\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\",\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  parameters: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"object\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"   hello: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"string\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  }),\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  data: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"object\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"({\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    response: z.\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#B392F0\"},\"children\":\"string\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"()\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"  }),\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"   opts: {\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"      revalidate: \"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#79B8FF\"},\"children\":\"900\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\" ;\"}],[\"$\",\"span\",null,{\"style\":{\"color\":\"#6A737D\"},\"children\":\"// \u003c-------- Add this\"}]]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"    };\"}]}],\"\\n\",[\"$\",\"span\",null,{\"data-line\":\"\",\"children\":[\"$\",\"span\",null,{\"style\":{\"color\":\"#E1E4E8\"},\"children\":\"});\"}]}]]}]}]}]]}]}]]}]\n"])</script><script>self.__next_f.push([1,"5:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"moalarbi.com\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Co-founder of unkey.dev and founder of planetfall.io\"}],[\"$\",\"meta\",\"3\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"4\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"5\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:title\",\"content\":\"moalarbi.com\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:description\",\"content\":\"Co-founder of unkey.dev and founder of planetfall.io\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:url\",\"content\":\"https://moalarbi.com/\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:site_name\",\"content\":\"moalarbi.com\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:locale\",\"content\":\"en-US\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:image\",\"content\":\"https://moalarbi.com/og.png\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:image:width\",\"content\":\"1920\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:image:height\",\"content\":\"1080\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"16\",{\"name\":\"twitter:title\",\"content\":\"Chronark\"}],[\"$\",\"meta\",\"17\",{\"name\":\"twitter:description\",\"content\":\"Co-founder of unkey.dev and founder of planetfall.io\"}],[\"$\",\"meta\",\"18\",{\"name\":\"twitter:image\",\"content\":\"https://moalarbi.com/og.png\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:image:width\",\"content\":\"1920\"}],[\"$\",\"meta\",\"20\",{\"name\":\"twitter:image:height\",\"content\":\"1080\"}],[\"$\",\"link\",\"21\",{\"rel\":\"shortcut icon\",\"href\":\"/favicon.png\"}]]\n"])</script><script>self.__next_f.push([1,"a:null\n"])</script></body></html>