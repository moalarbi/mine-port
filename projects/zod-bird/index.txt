1:HL["/moalarbi-portfolio1/_next/static/css/bf3b67282ae622e4.css","style",{"crossOrigin":""}]
0:["jHFRI1hbc4sPCTkgfETlV",[[["",{"children":["projects",{"children":[["slug","zod-bird","d"],{"children":["__PAGE__?{\"slug\":\"zod-bird\"}",{}]}]}]},"$undefined","$undefined",true],"$L2",[[["$","link","0",{"rel":"stylesheet","href":"/moalarbi-portfolio1/_next/static/css/bf3b67282ae622e4.css","precedence":"next","crossOrigin":""}]],"$L3"]]]]
4:HL["/moalarbi-portfolio1/_next/static/css/ccb12de4c58e29a3.css","style",{"crossOrigin":""}]
5:I[4256,["185","static/chunks/app/layout-854e0d098fab093b.js"],"Analytics"]
6:I[1442,[],""]
7:I[8733,[],""]
3:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"moalarbi.com"}],["$","meta","2",{"name":"description","content":"Co-founder of unkey.dev and founder of planetfall.io"}],["$","meta","3",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","4",{"name":"robots","content":"index, follow"}],["$","meta","5",{"name":"googlebot","content":"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"}],["$","meta","6",{"property":"og:title","content":"moalarbi.com"}],["$","meta","7",{"property":"og:description","content":"Co-founder of unkey.dev and founder of planetfall.io"}],["$","meta","8",{"property":"og:url","content":"https://moalarbi.com/"}],["$","meta","9",{"property":"og:site_name","content":"moalarbi.com"}],["$","meta","10",{"property":"og:locale","content":"en-US"}],["$","meta","11",{"property":"og:image","content":"https://moalarbi.com/og.png"}],["$","meta","12",{"property":"og:image:width","content":"1920"}],["$","meta","13",{"property":"og:image:height","content":"1080"}],["$","meta","14",{"property":"og:type","content":"website"}],["$","meta","15",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","16",{"name":"twitter:title","content":"Chronark"}],["$","meta","17",{"name":"twitter:description","content":"Co-founder of unkey.dev and founder of planetfall.io"}],["$","meta","18",{"name":"twitter:image","content":"https://moalarbi.com/og.png"}],["$","meta","19",{"name":"twitter:image:width","content":"1920"}],["$","meta","20",{"name":"twitter:image:height","content":"1080"}],["$","link","21",{"rel":"shortcut icon","href":"/favicon.png"}]]
2:[null,["$","html",null,{"lang":"ar","dir":"rtl","className":"__variable_368abf __variable_364a63","children":[["$","head",null,{"children":["$","$L5",null,{}]}],["$","body",null,{"className":"bg-black font-ibm ","children":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"childProp":{"current":[null,["$","div",null,{"className":"relative min-h-screen bg-gradient-to-tl from-zinc-900 via-zinc-400/10 to-zinc-900 ","children":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","projects","children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","projects","children",["slug","zod-bird","d"],"children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$L8","$L9",null],"segment":"__PAGE__?{\"slug\":\"zod-bird\"}"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/moalarbi-portfolio1/_next/static/css/ccb12de4c58e29a3.css","precedence":"next","crossOrigin":""}]]}],"segment":["slug","zod-bird","d"]},"styles":[]}]}],null],"segment":"projects"},"styles":[]}]}]]}],null]
a:I[9762,["627","static/chunks/627-2305de044010e1d9.js","428","static/chunks/428-b3b3993ff492f857.js","101","static/chunks/app/projects/%5Bslug%5D/page-792858a32482a6f2.js"],"Header"]
d:I[428,["627","static/chunks/627-2305de044010e1d9.js","428","static/chunks/428-b3b3993ff492f857.js","101","static/chunks/app/projects/%5Bslug%5D/page-792858a32482a6f2.js"],""]
b:Tc21,
- typesafe
- handles building the url params for you
- easy transformation of resulting data
- built in cache directives for nextjs
- built in retry logic for ratelimited requests


```ts
import { Tinybird } from "@chronark/zod-bird";
import { z } from "zod";

const tb = new Tinybird({ token: "token" });

export const getEvents = tb.buildPipe({
  pipe: "get_events__v1",
  parameters: z.object({
    tenantId: z.string(),
  }),
  data: z.object({
    event: z.string(),
    time: z.number().transform((t) => new Date(t)),
  }),
});


const res = await getEvents({ tenantId: "chronark" })

// res.data = {event: string, time: Date}[]
```

## Install

```
npm i @chronark/zod-bird
```


## Ingesting Data

```ts
// lib/tinybird.ts
import { Tinybird } from "./client";
import { z } from "zod";

const tb = new Tinybird({ token: process.env.TINYBIRD_TOKEN! });

export const publishEvent = tb.buildIngestEndpoint({
  datasource: "events__v1",
  event: z.object({
    id: z.string(),
    tenantId: z.string(),
    channelId: z.string(),
    time: z.number().int(),
    event: z.string(),
    content: z.string().optional().default(""),
    metadata: z.string().optional().default(""),
  }),
});
```

```ts
// somewhere.ts
import { publishEvent } from "./lib/tinybird";

await publishEvent({
  id: "1",
  tenantId: "1",
  channelId: "1",
  time: Date.now(),
  event: "test",
  content: "test",
  metadata: JSON.stringify({ test: "test" }),
});
```



## Querying Endpoints

```ts
// lib/tinybird.ts
import { Tinybird } from "./client";
import { z } from "zod";

const tb = new Tinybird({ token: process.env.TINYBIRD_TOKEN! });

export const getChannelActivity = tb.buildPipe({
  pipe: "get_channel_activity__v1",
  parameters: z.object({
    tenantId: z.string(),
    channelId: z.string().optional(),
    start: z.number(),
    end: z.number().optional(),
    granularity: z.enum(["1m", "1h", "1d", "1w", "1M"]),
  }),
  data: z.object({
    time: z.string().transform((t) => new Date(t).getTime()),
    count: z
      .number()
      .nullable()
      .optional()
      .transform((v) => (typeof v === "number" ? v : 0)),
  }),
});
```

```ts
// somewhere.ts
import { getChannelActivity } from "./lib/tinybird";


const res = await getChannelActivity({
   tenantId: "1",
   channelId: "1",
   start: 123,
   end: 1234,
   granularity: "1h"
})

```
`res` is the response from the tinybird endpoint, but now fully typed and the data has been parsed according to the schema defined in `data`.

## Advanced

### Caching

You can add cache directives to each pipe.


#### Disable caching (useful in Next.js where everything is cached by default)

```ts
tb.buildPipe({
  pipe: "some_pipe__v1",
  parameters: z.object({
   hello: z.string()
  }),
  data: z.object({
    response: z.string()
  }),
   opts: {
      cache: "no-store" // <-------- Add this
   };
});

```

#### Cache for 15 minutes

```ts

tb.buildPipe({
  pipe: "some_pipe__v1",
  parameters: z.object({
   hello: z.string()
  }),
  data: z.object({
    response: z.string()
  }),
   opts: {
      revalidate: 900 ;// <-------- Add this
    };
});
c:T8f88,var Component=(()=>{var E=Object.create;var a=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var g=(e,l)=>()=>(l||e((l={exports:{}}).exports,l),l.exports),u=(e,l)=>{for(var r in l)a(e,r,{get:l[r],enumerable:!0})},o=(e,l,r,c)=>{if(l&&typeof l=="object"||typeof l=="function")for(let s of p(l))!F.call(e,s)&&s!==r&&a(e,s,{get:()=>l[s],enumerable:!(c=h(l,s))||c.enumerable});return e};var B=(e,l,r)=>(r=e!=null?E(y(e)):{},o(l||!e||!e.__esModule?a(r,"default",{value:e,enumerable:!0}):r,e)),m=e=>o(a({},"__esModule",{value:!0}),e);var t=g((k,i)=>{i.exports=_jsx_runtime});var v={};u(v,{default:()=>C,frontmatter:()=>b});var n=B(t()),b={title:"Zod Bird",description:"Zodbird is an e2e typed tinybird.co client library for typescript, leveraging zod for type safety and transformations",repository:"chronark/zod-bird",date:"2023-05-21",published:!0};function d(e){let l=Object.assign({ul:"ul",li:"li",div:"div",pre:"pre",code:"code",span:"span",h2:"h2",a:"a",p:"p",h3:"h3",h4:"h4"},e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.ul,{children:[`
`,(0,n.jsx)(l.li,{children:"typesafe"}),`
`,(0,n.jsx)(l.li,{children:"handles building the url params for you"}),`
`,(0,n.jsx)(l.li,{children:"easy transformation of resulting data"}),`
`,(0,n.jsx)(l.li,{children:"built in cache directives for nextjs"}),`
`,(0,n.jsx)(l.li,{children:"built in retry logic for ratelimited requests"}),`
`]}),`
`,(0,n.jsx)(l.div,{"data-rehype-pretty-code-fragment":"",children:(0,n.jsx)(l.pre,{className:"github-dark",style:{backgroundColor:"#24292e"},tabIndex:"0","data-language":"ts","data-theme":"default",children:(0,n.jsxs)(l.code,{"data-language":"ts","data-theme":"default",style:{display:"grid"},children:[(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"import"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" { Tinybird } "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"from"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"@chronark/zod-bird"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:";"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"import"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" { z } "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"from"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"zod"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:";"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:" "}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#79B8FF"},children:"tb"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"new"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"Tinybird"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({ token: "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"token"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" });"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:" "}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"export"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#79B8FF"},children:"getEvents"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" tb."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"buildPipe"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  pipe: "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"get_events__v1"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  parameters: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"object"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    tenantId: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"string"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(),"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  }),"})}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  data: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"object"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    event: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"string"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(),"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    time: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"number"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"()."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"transform"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(("}),(0,n.jsx)(l.span,{style:{color:"#FFAB70"},children:"t"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:") "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"=>"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"new"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"Date"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(t)),"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  }),"})}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"});"})}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:" "}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:" "}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#79B8FF"},children:"res"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"await"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"getEvents"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({ tenantId: "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"chronark"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" })"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:" "}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#6A737D"},children:"// res.data = {event: string, time: Date}[]"})})]})})}),`
`,(0,n.jsxs)(l.h2,{id:"install",children:[(0,n.jsx)(l.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#install",children:(0,n.jsx)(l.span,{className:"icon icon-link"})}),"Install"]}),`
`,(0,n.jsx)(l.div,{"data-rehype-pretty-code-fragment":"",children:(0,n.jsx)(l.pre,{className:"github-dark",style:{backgroundColor:"#24292e"},tabIndex:"0","data-language":"","data-theme":"default",children:(0,n.jsx)(l.code,{"data-language":"","data-theme":"default",style:{display:"grid"},children:(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#e1e4e8"},children:"npm i @chronark/zod-bird"})})})})}),`
`,(0,n.jsxs)(l.h2,{id:"ingesting-data",children:[(0,n.jsx)(l.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#ingesting-data",children:(0,n.jsx)(l.span,{className:"icon icon-link"})}),"Ingesting Data"]}),`
`,(0,n.jsx)(l.div,{"data-rehype-pretty-code-fragment":"",children:(0,n.jsx)(l.pre,{className:"github-dark",style:{backgroundColor:"#24292e"},tabIndex:"0","data-language":"ts","data-theme":"default",children:(0,n.jsxs)(l.code,{"data-language":"ts","data-theme":"default",style:{display:"grid"},children:[(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#6A737D"},children:"// lib/tinybird.ts"})}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"import"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" { Tinybird } "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"from"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"./client"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:";"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"import"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" { z } "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"from"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"zod"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:";"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:" "}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#79B8FF"},children:"tb"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"new"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"Tinybird"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({ token: process.env."}),(0,n.jsx)(l.span,{style:{color:"#79B8FF"},children:"TINYBIRD_TOKEN"}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"!"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" });"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:" "}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"export"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#79B8FF"},children:"publishEvent"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" tb."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"buildIngestEndpoint"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  datasource: "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"events__v1"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  event: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"object"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    id: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"string"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(),"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    tenantId: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"string"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(),"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    channelId: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"string"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(),"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    time: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"number"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"()."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"int"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(),"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    event: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"string"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(),"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    content: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"string"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"()."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"optional"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"()."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"default"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"("}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'""'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"),"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    metadata: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"string"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"()."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"optional"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"()."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"default"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"("}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'""'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"),"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  }),"})}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"});"})})]})})}),`
`,(0,n.jsx)(l.div,{"data-rehype-pretty-code-fragment":"",children:(0,n.jsx)(l.pre,{className:"github-dark",style:{backgroundColor:"#24292e"},tabIndex:"0","data-language":"ts","data-theme":"default",children:(0,n.jsxs)(l.code,{"data-language":"ts","data-theme":"default",style:{display:"grid"},children:[(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#6A737D"},children:"// somewhere.ts"})}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"import"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" { publishEvent } "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"from"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"./lib/tinybird"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:";"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:" "}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"await"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"publishEvent"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  id: "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"1"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  tenantId: "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"1"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  channelId: "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"1"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  time: Date."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"now"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(),"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  event: "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"test"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  content: "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"test"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  metadata: "}),(0,n.jsx)(l.span,{style:{color:"#79B8FF"},children:"JSON"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"stringify"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({ test: "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"test"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" }),"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"});"})})]})})}),`
`,(0,n.jsxs)(l.h2,{id:"querying-endpoints",children:[(0,n.jsx)(l.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#querying-endpoints",children:(0,n.jsx)(l.span,{className:"icon icon-link"})}),"Querying Endpoints"]}),`
`,(0,n.jsx)(l.div,{"data-rehype-pretty-code-fragment":"",children:(0,n.jsx)(l.pre,{className:"github-dark",style:{backgroundColor:"#24292e"},tabIndex:"0","data-language":"ts","data-theme":"default",children:(0,n.jsxs)(l.code,{"data-language":"ts","data-theme":"default",style:{display:"grid"},children:[(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#6A737D"},children:"// lib/tinybird.ts"})}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"import"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" { Tinybird } "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"from"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"./client"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:";"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"import"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" { z } "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"from"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"zod"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:";"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:" "}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#79B8FF"},children:"tb"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"new"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"Tinybird"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({ token: process.env."}),(0,n.jsx)(l.span,{style:{color:"#79B8FF"},children:"TINYBIRD_TOKEN"}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"!"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" });"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:" "}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"export"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#79B8FF"},children:"getChannelActivity"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" tb."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"buildPipe"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  pipe: "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"get_channel_activity__v1"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  parameters: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"object"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    tenantId: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"string"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(),"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    channelId: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"string"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"()."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"optional"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(),"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    start: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"number"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(),"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    end: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"number"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"()."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"optional"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(),"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    granularity: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"enum"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(["}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"1m"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:", "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"1h"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:", "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"1d"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:", "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"1w"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:", "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"1M"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"]),"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  }),"})}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  data: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"object"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    time: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"string"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"()."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"transform"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(("}),(0,n.jsx)(l.span,{style:{color:"#FFAB70"},children:"t"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:") "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"=>"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"new"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"Date"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(t)."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"getTime"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"()),"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    count: z"})}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"      ."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"number"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"()"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"      ."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"nullable"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"()"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"      ."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"optional"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"()"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"      ."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"transform"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"(("}),(0,n.jsx)(l.span,{style:{color:"#FFAB70"},children:"v"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:") "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"=>"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" ("}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"typeof"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" v "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"==="}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"number"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"?"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" v "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:":"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#79B8FF"},children:"0"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:")),"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  }),"})}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"});"})})]})})}),`
`,(0,n.jsx)(l.div,{"data-rehype-pretty-code-fragment":"",children:(0,n.jsx)(l.pre,{className:"github-dark",style:{backgroundColor:"#24292e"},tabIndex:"0","data-language":"ts","data-theme":"default",children:(0,n.jsxs)(l.code,{"data-language":"ts","data-theme":"default",style:{display:"grid"},children:[(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#6A737D"},children:"// somewhere.ts"})}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"import"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" { getChannelActivity } "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"from"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"./lib/tinybird"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:";"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:" "}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:" "}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#79B8FF"},children:"res"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#F97583"},children:"await"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"getChannelActivity"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"   tenantId: "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"1"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"   channelId: "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"1"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"   start: "}),(0,n.jsx)(l.span,{style:{color:"#79B8FF"},children:"123"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"   end: "}),(0,n.jsx)(l.span,{style:{color:"#79B8FF"},children:"1234"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"   granularity: "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"1h"'})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"})"})}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:" "})]})})}),`
`,(0,n.jsxs)(l.p,{children:[(0,n.jsx)(l.code,{children:"res"})," is the response from the tinybird endpoint, but now fully typed and the data has been parsed according to the schema defined in ",(0,n.jsx)(l.code,{children:"data"}),"."]}),`
`,(0,n.jsxs)(l.h2,{id:"advanced",children:[(0,n.jsx)(l.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#advanced",children:(0,n.jsx)(l.span,{className:"icon icon-link"})}),"Advanced"]}),`
`,(0,n.jsxs)(l.h3,{id:"caching",children:[(0,n.jsx)(l.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#caching",children:(0,n.jsx)(l.span,{className:"icon icon-link"})}),"Caching"]}),`
`,(0,n.jsx)(l.p,{children:"You can add cache directives to each pipe."}),`
`,(0,n.jsxs)(l.h4,{id:"disable-caching-useful-in-nextjs-where-everything-is-cached-by-default",children:[(0,n.jsx)(l.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#disable-caching-useful-in-nextjs-where-everything-is-cached-by-default",children:(0,n.jsx)(l.span,{className:"icon icon-link"})}),"Disable caching (useful in Next.js where everything is cached by default)"]}),`
`,(0,n.jsx)(l.div,{"data-rehype-pretty-code-fragment":"",children:(0,n.jsx)(l.pre,{className:"github-dark",style:{backgroundColor:"#24292e"},tabIndex:"0","data-language":"ts","data-theme":"default",children:(0,n.jsxs)(l.code,{"data-language":"ts","data-theme":"default",style:{display:"grid"},children:[(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"tb."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"buildPipe"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  pipe: "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"some_pipe__v1"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  parameters: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"object"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"   hello: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"string"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"()"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  }),"})}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  data: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"object"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    response: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"string"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"()"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  }),"})}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"   opts: {"})}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"      cache: "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"no-store"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(l.span,{style:{color:"#6A737D"},children:"// <-------- Add this"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"   };"})}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"});"})}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:" "})]})})}),`
`,(0,n.jsxs)(l.h4,{id:"cache-for-15-minutes",children:[(0,n.jsx)(l.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#cache-for-15-minutes",children:(0,n.jsx)(l.span,{className:"icon icon-link"})}),"Cache for 15 minutes"]}),`
`,(0,n.jsx)(l.div,{"data-rehype-pretty-code-fragment":"",children:(0,n.jsx)(l.pre,{className:"github-dark",style:{backgroundColor:"#24292e"},tabIndex:"0","data-language":"ts","data-theme":"default",children:(0,n.jsxs)(l.code,{"data-language":"ts","data-theme":"default",style:{display:"grid"},children:[(0,n.jsx)(l.span,{"data-line":"",children:" "}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"tb."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"buildPipe"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  pipe: "}),(0,n.jsx)(l.span,{style:{color:"#9ECBFF"},children:'"some_pipe__v1"'}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  parameters: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"object"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"   hello: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"string"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"()"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  }),"})}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  data: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"object"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    response: z."}),(0,n.jsx)(l.span,{style:{color:"#B392F0"},children:"string"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"()"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"  }),"})}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"   opts: {"})}),`
`,(0,n.jsxs)(l.span,{"data-line":"",children:[(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"      revalidate: "}),(0,n.jsx)(l.span,{style:{color:"#79B8FF"},children:"900"}),(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:" ;"}),(0,n.jsx)(l.span,{style:{color:"#6A737D"},children:"// <-------- Add this"})]}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"    };"})}),`
`,(0,n.jsx)(l.span,{"data-line":"",children:(0,n.jsx)(l.span,{style:{color:"#E1E4E8"},children:"});"})})]})})})]})}function f(e={}){let{wrapper:l}=e.components||{};return l?(0,n.jsx)(l,Object.assign({},e,{children:(0,n.jsx)(d,e)})):d(e)}var C=f;return m(v);})();
;return Component;9:["$","div",null,{"dir":"rtl","lang":"ar","className":"bg-zinc-50 min-h-screen text-right","children":[["$","$La",null,{"project":{"published":true,"title":"Zod Bird","description":"Zodbird is an e2e typed tinybird.co client library for typescript, leveraging zod for type safety and transformations","date":"2023-05-21T00:00:00.000Z","repository":"chronark/zod-bird","body":{"raw":"$b","code":"$c"},"_id":"projects/zod-bird.mdx","_raw":{"sourceFilePath":"projects/zod-bird.mdx","sourceFileName":"zod-bird.mdx","sourceFileDir":"projects","contentType":"mdx","flattenedPath":"projects/zod-bird"},"type":"Project","path":"/projects/zod-bird","slug":"zod-bird"},"views":1234}],["$","article",null,{"className":"px-4 py-12 mx-auto prose prose-zinc prose-quoteless","children":["$","div",null,{"className":"mdx","children":[["$","ul",null,{"className":"my-6 ml-6 list-disc","children":["\n",["$","li",null,{"className":"mt-2","children":"typesafe"}],"\n",["$","li",null,{"className":"mt-2","children":"handles building the url params for you"}],"\n",["$","li",null,{"className":"mt-2","children":"easy transformation of resulting data"}],"\n",["$","li",null,{"className":"mt-2","children":"built in cache directives for nextjs"}],"\n",["$","li",null,{"className":"mt-2","children":"built in retry logic for ratelimited requests"}],"\n"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark","style":{"backgroundColor":"#24292e"},"tabIndex":"0","data-language":"ts","data-theme":"default","children":["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","data-language":"ts","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"import"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" { Tinybird } "}],["$","span",null,{"style":{"color":"#F97583"},"children":"from"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"@chronark/zod-bird\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"import"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" { z } "}],["$","span",null,{"style":{"color":"#F97583"},"children":"from"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"zod\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"tb"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"new"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#B392F0"},"children":"Tinybird"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({ token: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"token\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" });"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"export"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"getEvents"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" tb."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"buildPipe"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  pipe: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"get_events__v1\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  parameters: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"object"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    tenantId: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"string"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(),"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  }),"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  data: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"object"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    event: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"string"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(),"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    time: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"number"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"transform"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(("}],["$","span",null,{"style":{"color":"#FFAB70"},"children":"t"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":") "}],["$","span",null,{"style":{"color":"#F97583"},"children":"=>"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"new"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#B392F0"},"children":"Date"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(t)),"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  }),"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"});"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"res"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"await"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#B392F0"},"children":"getEvents"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({ tenantId: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"chronark\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" })"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A737D"},"children":"// res.data = {event: string, time: Date}[]"}]}]]}]}]}],"\n",["$","h2",null,{"className":"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0","id":"install","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#install","children":["$","span",null,{"className":"icon icon-link"}]}],"Install"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark","style":{"backgroundColor":"#24292e"},"tabIndex":"0","data-language":"","data-theme":"default","children":["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","data-language":"","data-theme":"default","style":{"display":"grid"},"children":["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#e1e4e8"},"children":"npm i @chronark/zod-bird"}]}]}]}]}],"\n",["$","h2",null,{"className":"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0","id":"ingesting-data","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#ingesting-data","children":["$","span",null,{"className":"icon icon-link"}]}],"Ingesting Data"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark","style":{"backgroundColor":"#24292e"},"tabIndex":"0","data-language":"ts","data-theme":"default","children":["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","data-language":"ts","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A737D"},"children":"// lib/tinybird.ts"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"import"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" { Tinybird } "}],["$","span",null,{"style":{"color":"#F97583"},"children":"from"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"./client\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"import"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" { z } "}],["$","span",null,{"style":{"color":"#F97583"},"children":"from"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"zod\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"tb"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"new"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#B392F0"},"children":"Tinybird"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({ token: process.env."}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"TINYBIRD_TOKEN"}],["$","span",null,{"style":{"color":"#F97583"},"children":"!"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" });"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"export"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"publishEvent"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" tb."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"buildIngestEndpoint"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  datasource: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"events__v1\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  event: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"object"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    id: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"string"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(),"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    tenantId: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"string"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(),"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    channelId: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"string"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(),"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    time: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"number"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"int"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(),"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    event: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"string"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(),"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    content: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"string"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"optional"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"default"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"),"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    metadata: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"string"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"optional"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"default"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"),"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  }),"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"});"}]}]]}]}]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark","style":{"backgroundColor":"#24292e"},"tabIndex":"0","data-language":"ts","data-theme":"default","children":["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","data-language":"ts","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A737D"},"children":"// somewhere.ts"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"import"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" { publishEvent } "}],["$","span",null,{"style":{"color":"#F97583"},"children":"from"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"./lib/tinybird\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"await"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#B392F0"},"children":"publishEvent"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  id: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"1\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  tenantId: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"1\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  channelId: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"1\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  time: Date."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"now"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(),"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  event: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"test\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  content: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"test\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  metadata: "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"JSON"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"stringify"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({ test: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"test\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" }),"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"});"}]}]]}]}]}],"\n",["$","h2",null,{"className":"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0","id":"querying-endpoints","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#querying-endpoints","children":["$","span",null,{"className":"icon icon-link"}]}],"Querying Endpoints"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark","style":{"backgroundColor":"#24292e"},"tabIndex":"0","data-language":"ts","data-theme":"default","children":["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","data-language":"ts","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A737D"},"children":"// lib/tinybird.ts"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"import"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" { Tinybird } "}],["$","span",null,{"style":{"color":"#F97583"},"children":"from"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"./client\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"import"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" { z } "}],["$","span",null,{"style":{"color":"#F97583"},"children":"from"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"zod\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"tb"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"new"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#B392F0"},"children":"Tinybird"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({ token: process.env."}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"TINYBIRD_TOKEN"}],["$","span",null,{"style":{"color":"#F97583"},"children":"!"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" });"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"export"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"getChannelActivity"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" tb."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"buildPipe"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  pipe: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"get_channel_activity__v1\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  parameters: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"object"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    tenantId: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"string"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(),"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    channelId: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"string"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"optional"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(),"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    start: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"number"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(),"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    end: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"number"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"optional"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(),"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    granularity: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"enum"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(["}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"1m\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":", "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"1h\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":", "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"1d\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":", "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"1w\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":", "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"1M\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"]),"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  }),"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  data: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"object"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    time: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"string"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"transform"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(("}],["$","span",null,{"style":{"color":"#FFAB70"},"children":"t"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":") "}],["$","span",null,{"style":{"color":"#F97583"},"children":"=>"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"new"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#B392F0"},"children":"Date"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(t)."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"getTime"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()),"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    count: z"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"      ."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"number"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"      ."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"nullable"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"      ."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"optional"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"      ."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"transform"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(("}],["$","span",null,{"style":{"color":"#FFAB70"},"children":"v"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":") "}],["$","span",null,{"style":{"color":"#F97583"},"children":"=>"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" ("}],["$","span",null,{"style":{"color":"#F97583"},"children":"typeof"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" v "}],["$","span",null,{"style":{"color":"#F97583"},"children":"==="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"number\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"?"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" v "}],["$","span",null,{"style":{"color":"#F97583"},"children":":"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"0"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":")),"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  }),"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"});"}]}]]}]}]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark","style":{"backgroundColor":"#24292e"},"tabIndex":"0","data-language":"ts","data-theme":"default","children":["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","data-language":"ts","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#6A737D"},"children":"// somewhere.ts"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"import"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" { getChannelActivity } "}],["$","span",null,{"style":{"color":"#F97583"},"children":"from"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"./lib/tinybird\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":";"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"res"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"await"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#B392F0"},"children":"getChannelActivity"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"   tenantId: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"1\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"   channelId: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"1\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"   start: "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"123"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"   end: "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"1234"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"   granularity: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"1h\""}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"})"}]}],"\n",["$","span",null,{"data-line":"","children":" "}]]}]}]}],"\n",["$","p",null,{"className":"leading-7 [&:not(:first-child)]:mt-6","children":[["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","children":"res"}]," is the response from the tinybird endpoint, but now fully typed and the data has been parsed according to the schema defined in ",["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","children":"data"}],"."]}],"\n",["$","h2",null,{"className":"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0","id":"advanced","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#advanced","children":["$","span",null,{"className":"icon icon-link"}]}],"Advanced"]}],"\n",["$","h3",null,{"className":"mt-8 scroll-m-20 text-2xl font-semibold tracking-tight","id":"caching","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#caching","children":["$","span",null,{"className":"icon icon-link"}]}],"Caching"]}],"\n",["$","p",null,{"className":"leading-7 [&:not(:first-child)]:mt-6","children":"You can add cache directives to each pipe."}],"\n",["$","h4",null,{"className":"mt-8 scroll-m-20 text-xl font-semibold tracking-tight","id":"disable-caching-useful-in-nextjs-where-everything-is-cached-by-default","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#disable-caching-useful-in-nextjs-where-everything-is-cached-by-default","children":["$","span",null,{"className":"icon icon-link"}]}],"Disable caching (useful in Next.js where everything is cached by default)"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark","style":{"backgroundColor":"#24292e"},"tabIndex":"0","data-language":"ts","data-theme":"default","children":["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","data-language":"ts","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"tb."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"buildPipe"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  pipe: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"some_pipe__v1\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  parameters: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"object"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"   hello: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"string"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  }),"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  data: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"object"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    response: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"string"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  }),"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"   opts: {"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"      cache: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"no-store\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#6A737D"},"children":"// <-------- Add this"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"   };"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"});"}]}],"\n",["$","span",null,{"data-line":"","children":" "}]]}]}]}],"\n",["$","h4",null,{"className":"mt-8 scroll-m-20 text-xl font-semibold tracking-tight","id":"cache-for-15-minutes","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#cache-for-15-minutes","children":["$","span",null,{"className":"icon icon-link"}]}],"Cache for 15 minutes"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark","style":{"backgroundColor":"#24292e"},"tabIndex":"0","data-language":"ts","data-theme":"default","children":["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","data-language":"ts","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"tb."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"buildPipe"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  pipe: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"some_pipe__v1\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  parameters: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"object"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"   hello: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"string"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  }),"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  data: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"object"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    response: z."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"string"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  }),"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"   opts: {"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"      revalidate: "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"900"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" ;"}],["$","span",null,{"style":{"color":"#6A737D"},"children":"// <-------- Add this"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    };"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"});"}]}]]}]}]}]]}]}]]}]
8:null
