1:HL["/moalarbi-portfolio1/_next/static/css/bf3b67282ae622e4.css","style",{"crossOrigin":""}]
0:["jHFRI1hbc4sPCTkgfETlV",[[["",{"children":["projects",{"children":[["slug","upstash-kafka","d"],{"children":["__PAGE__?{\"slug\":\"upstash-kafka\"}",{}]}]}]},"$undefined","$undefined",true],"$L2",[[["$","link","0",{"rel":"stylesheet","href":"/moalarbi-portfolio1/_next/static/css/bf3b67282ae622e4.css","precedence":"next","crossOrigin":""}]],"$L3"]]]]
4:HL["/moalarbi-portfolio1/_next/static/css/ccb12de4c58e29a3.css","style",{"crossOrigin":""}]
5:I[4256,["185","static/chunks/app/layout-854e0d098fab093b.js"],"Analytics"]
6:I[1442,[],""]
7:I[8733,[],""]
3:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"moalarbi.com"}],["$","meta","2",{"name":"description","content":"Co-founder of unkey.dev and founder of planetfall.io"}],["$","meta","3",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","4",{"name":"robots","content":"index, follow"}],["$","meta","5",{"name":"googlebot","content":"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"}],["$","meta","6",{"property":"og:title","content":"moalarbi.com"}],["$","meta","7",{"property":"og:description","content":"Co-founder of unkey.dev and founder of planetfall.io"}],["$","meta","8",{"property":"og:url","content":"https://moalarbi.com/"}],["$","meta","9",{"property":"og:site_name","content":"moalarbi.com"}],["$","meta","10",{"property":"og:locale","content":"en-US"}],["$","meta","11",{"property":"og:image","content":"https://moalarbi.com/og.png"}],["$","meta","12",{"property":"og:image:width","content":"1920"}],["$","meta","13",{"property":"og:image:height","content":"1080"}],["$","meta","14",{"property":"og:type","content":"website"}],["$","meta","15",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","16",{"name":"twitter:title","content":"Chronark"}],["$","meta","17",{"name":"twitter:description","content":"Co-founder of unkey.dev and founder of planetfall.io"}],["$","meta","18",{"name":"twitter:image","content":"https://moalarbi.com/og.png"}],["$","meta","19",{"name":"twitter:image:width","content":"1920"}],["$","meta","20",{"name":"twitter:image:height","content":"1080"}],["$","link","21",{"rel":"shortcut icon","href":"/favicon.png"}]]
2:[null,["$","html",null,{"lang":"ar","dir":"rtl","className":"__variable_368abf __variable_364a63","children":[["$","head",null,{"children":["$","$L5",null,{}]}],["$","body",null,{"className":"bg-black font-ibm ","children":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"childProp":{"current":[null,["$","div",null,{"className":"relative min-h-screen bg-gradient-to-tl from-zinc-900 via-zinc-400/10 to-zinc-900 ","children":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","projects","children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","projects","children",["slug","upstash-kafka","d"],"children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$L8","$L9",null],"segment":"__PAGE__?{\"slug\":\"upstash-kafka\"}"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/moalarbi-portfolio1/_next/static/css/ccb12de4c58e29a3.css","precedence":"next","crossOrigin":""}]]}],"segment":["slug","upstash-kafka","d"]},"styles":[]}]}],null],"segment":"projects"},"styles":[]}]}]]}],null]
a:I[9762,["627","static/chunks/627-2305de044010e1d9.js","428","static/chunks/428-b3b3993ff492f857.js","101","static/chunks/app/projects/%5Bslug%5D/page-792858a32482a6f2.js"],"Header"]
d:I[428,["627","static/chunks/627-2305de044010e1d9.js","428","static/chunks/428-b3b3993ff492f857.js","101","static/chunks/app/projects/%5Bslug%5D/page-792858a32482a6f2.js"],""]
b:Tee7,

An HTTP/REST based Kafka client built on top of
[Upstash REST API](https://docs.upstash.com/kafka/rest).

It is the only connectionless (HTTP based) Kafka client and designed for:

- Serverless functions (AWS Lambda ...)
- Cloudflare Workers (see the example)
- Fastly Compute@Edge
- Next.js Edge, Remix ...
- Client side web/mobile applications
- WebAssembly and other environments where HTTP is preferred over TCP
  connections.

# Installation

```bash
npm install @upstash/kafka
```

# Quickstart

## Auth

1. Go to [upstash](https://console.upstash.com/kafka) and select your database.
2. Copy the `REST API` secrets at the bottom of the page

```typescript
import { Kafka } from "@upstash/kafka"

const kafka = new Kafka({
  url: "<UPSTASH_KAFKA_REST_URL>",
  username: "<UPSTASH_KAFKA_REST_USERNAME>",
  password: "<UPSTASH_KAFKA_REST_PASSWORD>",
})
```

## Produce a single message

```typescript
const p = kafka.producer()
const message = { hello: "world" } // Objects will get serialized using `JSON.stringify`
const res = await p.produce("<my.topic>", message)
const res = await p.produce("<my.topic>", message, {
  partition: 1,
  timestamp: 12345,
  key: "<custom key>",
  headers: [{ key: "traceId", value: "85a9f12" }],
})
```

## Produce multiple messages.

The same options from the example above can be set for every message.

```typescript
const p = kafka.producer()
const res = await p.produceMany([
  {
    topic: "my.topic",
    value: { hello: "world" },
    // ...options
  },
  {
    topic: "another.topic",
    value: "another message",
    // ...options
  },
])
```

## Consume

The first time a consumer is created, it needs to figure out the group
coordinator by asking the Kafka brokers and joins the consumer group. This
process takes some time to complete. That's why when a consumer instance is
created first time, it may return empty messages until consumer group
coordination is completed.

```typescript
const c = kafka.consumer()
const messages = await c.consume({
  consumerGroupId: "group_1",
  instanceId: "instance_1",
  topics: ["test.topic"],
  autoOffsetReset: "earliest",
})
```

More examples can be found in the
[docstring](https://github.com/upstash/upstash-kafka/blob/main/pkg/consumer.ts#L265)

## Commit manually

While `consume` can handle committing automatically, you can also use
`Consumer.commit` to manually commit.

```typescript
const consumerGroupId = "mygroup"
const instanceId = "myinstance"
const topic = "my.topic"

const c = kafka.consumer()
const messages = await c.consume({
  consumerGroupId,
  instanceId,
  topics: [topic],
  autoCommit: false,
})

for (const message of messages) {
  // message handling logic

  await c.commit({
    consumerGroupId,
    instanceId,
    offset: {
      topic: message.topic,
      partition: message.partition,
      offset: message.offset,
    },
  })
}
```

## Fetch

You can also manage offsets manually by using `Consumer.fetch`

```typescript
const c = kafka.consumer()
const messages = await c.fetch({
  topic: "greeting",
  partition: 3,
  offset: 42,
  timeout: 1000,
})
```

## Examples

See [/examples](https://github.com/upstash/upstash-kafka/tree/main/examples) as
well as various examples in the docstrings of each method.

# Contributing

## Requirements

- [nodejs](https://nodejs.org) v14.x or higher
- [pnpm](https://pnpm.io/installation)

## Setup

0. Install dependencies using `pnpm install`
1. Create a kafka instance on upstash.
   [docs](https://docs.upstash.com/kafka#create-a-kafka-cluster)
2. Create the following topics: `blue`, `red`, `green`.
   [docs](https://docs.upstash.com/kafka#create-a-topic)

   The partitions or retention settings don't matter at this time.

3. Create `.env` file with your kafka secrets `cp .env.example .env`

## Running tests

```bash
pnpm test
```
c:T749a,var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var u=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),F=(l,e)=>{for(var a in e)c(l,a,{get:e[a],enumerable:!0})},o=(l,e,a,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of E(e))!m.call(l,s)&&s!==a&&c(l,s,{get:()=>e[s],enumerable:!(r=p(e,s))||r.enumerable});return l};var g=(l,e,a)=>(a=l!=null?h(y(l)):{},o(e||!l||!l.__esModule?c(a,"default",{value:l,enumerable:!0}):a,l)),f=l=>o(c({},"__esModule",{value:!0}),l);var t=u((x,i)=>{i.exports=_jsx_runtime});var C={};F(C,{default:()=>B,frontmatter:()=>k});var n=g(t()),k={title:"@upstash/kafka",description:"A fully typed Kafka client built for Upstash Kafka and HTTP, perfect for serverless and edge runtimes",date:"2022-01-08",url:"https://upstash.com/kafka",repository:"upstash/upstash-kafka",published:!0};function d(l){let e=Object.assign({p:"p",a:"a",ul:"ul",li:"li",h1:"h1",span:"span",div:"div",pre:"pre",code:"code",h2:"h2",ol:"ol"},l.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[`An HTTP/REST based Kafka client built on top of
`,(0,n.jsx)(e.a,{href:"https://docs.upstash.com/kafka/rest",children:"Upstash REST API"}),"."]}),`
`,(0,n.jsx)(e.p,{children:"It is the only connectionless (HTTP based) Kafka client and designed for:"}),`
`,(0,n.jsxs)(e.ul,{children:[`
`,(0,n.jsx)(e.li,{children:"Serverless functions (AWS Lambda ...)"}),`
`,(0,n.jsx)(e.li,{children:"Cloudflare Workers (see the example)"}),`
`,(0,n.jsx)(e.li,{children:"Fastly Compute@Edge"}),`
`,(0,n.jsx)(e.li,{children:"Next.js Edge, Remix ..."}),`
`,(0,n.jsx)(e.li,{children:"Client side web/mobile applications"}),`
`,(0,n.jsx)(e.li,{children:`WebAssembly and other environments where HTTP is preferred over TCP
connections.`}),`
`]}),`
`,(0,n.jsxs)(e.h1,{id:"installation",children:[(0,n.jsx)(e.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#installation",children:(0,n.jsx)(e.span,{className:"icon icon-link"})}),"Installation"]}),`
`,(0,n.jsx)(e.div,{"data-rehype-pretty-code-fragment":"",children:(0,n.jsx)(e.pre,{className:"github-dark",style:{backgroundColor:"#24292e"},tabIndex:"0","data-language":"bash","data-theme":"default",children:(0,n.jsx)(e.code,{"data-language":"bash","data-theme":"default",style:{display:"grid"},children:(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#B392F0"},children:"npm"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:"install"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:"@upstash/kafka"})]})})})}),`
`,(0,n.jsxs)(e.h1,{id:"quickstart",children:[(0,n.jsx)(e.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#quickstart",children:(0,n.jsx)(e.span,{className:"icon icon-link"})}),"Quickstart"]}),`
`,(0,n.jsxs)(e.h2,{id:"auth",children:[(0,n.jsx)(e.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#auth",children:(0,n.jsx)(e.span,{className:"icon icon-link"})}),"Auth"]}),`
`,(0,n.jsxs)(e.ol,{children:[`
`,(0,n.jsxs)(e.li,{children:["Go to ",(0,n.jsx)(e.a,{href:"https://console.upstash.com/kafka",children:"upstash"})," and select your database."]}),`
`,(0,n.jsxs)(e.li,{children:["Copy the ",(0,n.jsx)(e.code,{children:"REST API"})," secrets at the bottom of the page"]}),`
`]}),`
`,(0,n.jsx)(e.div,{"data-rehype-pretty-code-fragment":"",children:(0,n.jsx)(e.pre,{className:"github-dark",style:{backgroundColor:"#24292e"},tabIndex:"0","data-language":"typescript","data-theme":"default",children:(0,n.jsxs)(e.code,{"data-language":"typescript","data-theme":"default",style:{display:"grid"},children:[(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"import"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" { Kafka } "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"from"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"@upstash/kafka"'})]}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:" "}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"kafka"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"new"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#B392F0"},children:"Kafka"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  url: "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"<UPSTASH_KAFKA_REST_URL>"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  username: "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"<UPSTASH_KAFKA_REST_USERNAME>"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  password: "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"<UPSTASH_KAFKA_REST_PASSWORD>"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"})"})})]})})}),`
`,(0,n.jsxs)(e.h2,{id:"produce-a-single-message",children:[(0,n.jsx)(e.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#produce-a-single-message",children:(0,n.jsx)(e.span,{className:"icon icon-link"})}),"Produce a single message"]}),`
`,(0,n.jsx)(e.div,{"data-rehype-pretty-code-fragment":"",children:(0,n.jsx)(e.pre,{className:"github-dark",style:{backgroundColor:"#24292e"},tabIndex:"0","data-language":"typescript","data-theme":"default",children:(0,n.jsxs)(e.code,{"data-language":"typescript","data-theme":"default",style:{display:"grid"},children:[(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"p"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" kafka."}),(0,n.jsx)(e.span,{style:{color:"#B392F0"},children:"producer"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"()"})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"message"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" { hello: "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"world"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" } "}),(0,n.jsx)(e.span,{style:{color:"#6A737D"},children:"// Objects will get serialized using `JSON.stringify`"})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"res"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" p."}),(0,n.jsx)(e.span,{style:{color:"#B392F0"},children:"produce"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"<my.topic>"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:", message)"})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"res"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" p."}),(0,n.jsx)(e.span,{style:{color:"#B392F0"},children:"produce"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"<my.topic>"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:", message, {"})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  partition: "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"1"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  timestamp: "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"12345"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  key: "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"<custom key>"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  headers: [{ key: "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"traceId"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:", value: "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"85a9f12"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" }],"})]}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"})"})})]})})}),`
`,(0,n.jsxs)(e.h2,{id:"produce-multiple-messages",children:[(0,n.jsx)(e.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#produce-multiple-messages",children:(0,n.jsx)(e.span,{className:"icon icon-link"})}),"Produce multiple messages."]}),`
`,(0,n.jsx)(e.p,{children:"The same options from the example above can be set for every message."}),`
`,(0,n.jsx)(e.div,{"data-rehype-pretty-code-fragment":"",children:(0,n.jsx)(e.pre,{className:"github-dark",style:{backgroundColor:"#24292e"},tabIndex:"0","data-language":"typescript","data-theme":"default",children:(0,n.jsxs)(e.code,{"data-language":"typescript","data-theme":"default",style:{display:"grid"},children:[(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"p"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" kafka."}),(0,n.jsx)(e.span,{style:{color:"#B392F0"},children:"producer"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"()"})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"res"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" p."}),(0,n.jsx)(e.span,{style:{color:"#B392F0"},children:"produceMany"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"(["})]}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  {"})}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"    topic: "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"my.topic"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"    value: { hello: "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"world"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" },"})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"    "}),(0,n.jsx)(e.span,{style:{color:"#6A737D"},children:"// ...options"})]}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  },"})}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  {"})}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"    topic: "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"another.topic"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"    value: "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"another message"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"    "}),(0,n.jsx)(e.span,{style:{color:"#6A737D"},children:"// ...options"})]}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  },"})}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"])"})})]})})}),`
`,(0,n.jsxs)(e.h2,{id:"consume",children:[(0,n.jsx)(e.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#consume",children:(0,n.jsx)(e.span,{className:"icon icon-link"})}),"Consume"]}),`
`,(0,n.jsx)(e.p,{children:`The first time a consumer is created, it needs to figure out the group
coordinator by asking the Kafka brokers and joins the consumer group. This
process takes some time to complete. That's why when a consumer instance is
created first time, it may return empty messages until consumer group
coordination is completed.`}),`
`,(0,n.jsx)(e.div,{"data-rehype-pretty-code-fragment":"",children:(0,n.jsx)(e.pre,{className:"github-dark",style:{backgroundColor:"#24292e"},tabIndex:"0","data-language":"typescript","data-theme":"default",children:(0,n.jsxs)(e.code,{"data-language":"typescript","data-theme":"default",style:{display:"grid"},children:[(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"c"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" kafka."}),(0,n.jsx)(e.span,{style:{color:"#B392F0"},children:"consumer"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"()"})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"messages"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" c."}),(0,n.jsx)(e.span,{style:{color:"#B392F0"},children:"consume"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  consumerGroupId: "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"group_1"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  instanceId: "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"instance_1"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  topics: ["}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"test.topic"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"],"})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  autoOffsetReset: "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"earliest"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"})"})})]})})}),`
`,(0,n.jsxs)(e.p,{children:[`More examples can be found in the
`,(0,n.jsx)(e.a,{href:"https://github.com/upstash/upstash-kafka/blob/main/pkg/consumer.ts#L265",children:"docstring"})]}),`
`,(0,n.jsxs)(e.h2,{id:"commit-manually",children:[(0,n.jsx)(e.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#commit-manually",children:(0,n.jsx)(e.span,{className:"icon icon-link"})}),"Commit manually"]}),`
`,(0,n.jsxs)(e.p,{children:["While ",(0,n.jsx)(e.code,{children:"consume"}),` can handle committing automatically, you can also use
`,(0,n.jsx)(e.code,{children:"Consumer.commit"})," to manually commit."]}),`
`,(0,n.jsx)(e.div,{"data-rehype-pretty-code-fragment":"",children:(0,n.jsx)(e.pre,{className:"github-dark",style:{backgroundColor:"#24292e"},tabIndex:"0","data-language":"typescript","data-theme":"default",children:(0,n.jsxs)(e.code,{"data-language":"typescript","data-theme":"default",style:{display:"grid"},children:[(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"consumerGroupId"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"mygroup"'})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"instanceId"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"myinstance"'})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"topic"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"my.topic"'})]}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:" "}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"c"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" kafka."}),(0,n.jsx)(e.span,{style:{color:"#B392F0"},children:"consumer"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"()"})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"messages"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" c."}),(0,n.jsx)(e.span,{style:{color:"#B392F0"},children:"consume"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  consumerGroupId,"})}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  instanceId,"})}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  topics: [topic],"})}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  autoCommit: "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"false"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"})"})}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:" "}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"for"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" ("}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"message"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"of"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" messages) {"})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#6A737D"},children:"// message handling logic"})]}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:" "}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" c."}),(0,n.jsx)(e.span,{style:{color:"#B392F0"},children:"commit"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"    consumerGroupId,"})}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"    instanceId,"})}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"    offset: {"})}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"      topic: message.topic,"})}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"      partition: message.partition,"})}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"      offset: message.offset,"})}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"    },"})}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  })"})}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"}"})})]})})}),`
`,(0,n.jsxs)(e.h2,{id:"fetch",children:[(0,n.jsx)(e.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#fetch",children:(0,n.jsx)(e.span,{className:"icon icon-link"})}),"Fetch"]}),`
`,(0,n.jsxs)(e.p,{children:["You can also manage offsets manually by using ",(0,n.jsx)(e.code,{children:"Consumer.fetch"})]}),`
`,(0,n.jsx)(e.div,{"data-rehype-pretty-code-fragment":"",children:(0,n.jsx)(e.pre,{className:"github-dark",style:{backgroundColor:"#24292e"},tabIndex:"0","data-language":"typescript","data-theme":"default",children:(0,n.jsxs)(e.code,{"data-language":"typescript","data-theme":"default",style:{display:"grid"},children:[(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"c"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" kafka."}),(0,n.jsx)(e.span,{style:{color:"#B392F0"},children:"consumer"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"()"})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"const"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"messages"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"="}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#F97583"},children:"await"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" c."}),(0,n.jsx)(e.span,{style:{color:"#B392F0"},children:"fetch"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"({"})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  topic: "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:'"greeting"'}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  partition: "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"3"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  offset: "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"42"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"  timeout: "}),(0,n.jsx)(e.span,{style:{color:"#79B8FF"},children:"1000"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:","})]}),`
`,(0,n.jsx)(e.span,{"data-line":"",children:(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:"})"})})]})})}),`
`,(0,n.jsxs)(e.h2,{id:"examples",children:[(0,n.jsx)(e.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#examples",children:(0,n.jsx)(e.span,{className:"icon icon-link"})}),"Examples"]}),`
`,(0,n.jsxs)(e.p,{children:["See ",(0,n.jsx)(e.a,{href:"https://github.com/upstash/upstash-kafka/tree/main/examples",children:"/examples"}),` as
well as various examples in the docstrings of each method.`]}),`
`,(0,n.jsxs)(e.h1,{id:"contributing",children:[(0,n.jsx)(e.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#contributing",children:(0,n.jsx)(e.span,{className:"icon icon-link"})}),"Contributing"]}),`
`,(0,n.jsxs)(e.h2,{id:"requirements",children:[(0,n.jsx)(e.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#requirements",children:(0,n.jsx)(e.span,{className:"icon icon-link"})}),"Requirements"]}),`
`,(0,n.jsxs)(e.ul,{children:[`
`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:"https://nodejs.org",children:"nodejs"})," v14.x or higher"]}),`
`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"https://pnpm.io/installation",children:"pnpm"})}),`
`]}),`
`,(0,n.jsxs)(e.h2,{id:"setup",children:[(0,n.jsx)(e.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#setup",children:(0,n.jsx)(e.span,{className:"icon icon-link"})}),"Setup"]}),`
`,(0,n.jsxs)(e.ol,{start:"0",children:[`
`,(0,n.jsxs)(e.li,{children:[`
`,(0,n.jsxs)(e.p,{children:["Install dependencies using ",(0,n.jsx)(e.code,{children:"pnpm install"})]}),`
`]}),`
`,(0,n.jsxs)(e.li,{children:[`
`,(0,n.jsxs)(e.p,{children:[`Create a kafka instance on upstash.
`,(0,n.jsx)(e.a,{href:"https://docs.upstash.com/kafka#create-a-kafka-cluster",children:"docs"})]}),`
`]}),`
`,(0,n.jsxs)(e.li,{children:[`
`,(0,n.jsxs)(e.p,{children:["Create the following topics: ",(0,n.jsx)(e.code,{children:"blue"}),", ",(0,n.jsx)(e.code,{children:"red"}),", ",(0,n.jsx)(e.code,{children:"green"}),`.
`,(0,n.jsx)(e.a,{href:"https://docs.upstash.com/kafka#create-a-topic",children:"docs"})]}),`
`,(0,n.jsx)(e.p,{children:"The partitions or retention settings don't matter at this time."}),`
`]}),`
`,(0,n.jsxs)(e.li,{children:[`
`,(0,n.jsxs)(e.p,{children:["Create ",(0,n.jsx)(e.code,{children:".env"})," file with your kafka secrets ",(0,n.jsx)(e.code,{children:"cp .env.example .env"})]}),`
`]}),`
`]}),`
`,(0,n.jsxs)(e.h2,{id:"running-tests",children:[(0,n.jsx)(e.a,{className:"subheading-anchor","aria-label":"Link to section",href:"#running-tests",children:(0,n.jsx)(e.span,{className:"icon icon-link"})}),"Running tests"]}),`
`,(0,n.jsx)(e.div,{"data-rehype-pretty-code-fragment":"",children:(0,n.jsx)(e.pre,{className:"github-dark",style:{backgroundColor:"#24292e"},tabIndex:"0","data-language":"bash","data-theme":"default",children:(0,n.jsx)(e.code,{"data-language":"bash","data-theme":"default",style:{display:"grid"},children:(0,n.jsxs)(e.span,{"data-line":"",children:[(0,n.jsx)(e.span,{style:{color:"#B392F0"},children:"pnpm"}),(0,n.jsx)(e.span,{style:{color:"#E1E4E8"},children:" "}),(0,n.jsx)(e.span,{style:{color:"#9ECBFF"},children:"test"})]})})})})]})}function b(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,Object.assign({},l,{children:(0,n.jsx)(d,l)})):d(l)}var B=b;return f(C);})();
;return Component;9:["$","div",null,{"dir":"rtl","lang":"ar","className":"bg-zinc-50 min-h-screen text-right","children":[["$","$La",null,{"project":{"published":true,"title":"@upstash/kafka","description":"A fully typed Kafka client built for Upstash Kafka and HTTP, perfect for serverless and edge runtimes","date":"2022-01-08T00:00:00.000Z","url":"https://upstash.com/kafka","repository":"upstash/upstash-kafka","body":{"raw":"$b","code":"$c"},"_id":"projects/upstash-kafka.mdx","_raw":{"sourceFilePath":"projects/upstash-kafka.mdx","sourceFileName":"upstash-kafka.mdx","sourceFileDir":"projects","contentType":"mdx","flattenedPath":"projects/upstash-kafka"},"type":"Project","path":"/projects/upstash-kafka","slug":"upstash-kafka"},"views":1234}],["$","article",null,{"className":"px-4 py-12 mx-auto prose prose-zinc prose-quoteless","children":["$","div",null,{"className":"mdx","children":[["$","p",null,{"className":"leading-7 [&:not(:first-child)]:mt-6","children":["An HTTP/REST based Kafka client built on top of\n",["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4","href":"https://docs.upstash.com/kafka/rest","children":"Upstash REST API"}],"."]}],"\n",["$","p",null,{"className":"leading-7 [&:not(:first-child)]:mt-6","children":"It is the only connectionless (HTTP based) Kafka client and designed for:"}],"\n",["$","ul",null,{"className":"my-6 ml-6 list-disc","children":["\n",["$","li",null,{"className":"mt-2","children":"Serverless functions (AWS Lambda ...)"}],"\n",["$","li",null,{"className":"mt-2","children":"Cloudflare Workers (see the example)"}],"\n",["$","li",null,{"className":"mt-2","children":"Fastly Compute@Edge"}],"\n",["$","li",null,{"className":"mt-2","children":"Next.js Edge, Remix ..."}],"\n",["$","li",null,{"className":"mt-2","children":"Client side web/mobile applications"}],"\n",["$","li",null,{"className":"mt-2","children":"WebAssembly and other environments where HTTP is preferred over TCP\nconnections."}],"\n"]}],"\n",["$","h1",null,{"className":"mt-2 scroll-m-20 text-4xl font-bold tracking-tight","id":"installation","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#installation","children":["$","span",null,{"className":"icon icon-link"}]}],"Installation"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark","style":{"backgroundColor":"#24292e"},"tabIndex":"0","data-language":"bash","data-theme":"default","children":["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","data-language":"bash","data-theme":"default","style":{"display":"grid"},"children":["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"npm"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"install"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"@upstash/kafka"}]]}]}]}]}],"\n",["$","h1",null,{"className":"mt-2 scroll-m-20 text-4xl font-bold tracking-tight","id":"quickstart","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#quickstart","children":["$","span",null,{"className":"icon icon-link"}]}],"Quickstart"]}],"\n",["$","h2",null,{"className":"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0","id":"auth","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#auth","children":["$","span",null,{"className":"icon icon-link"}]}],"Auth"]}],"\n",["$","ol",null,{"className":"my-6 ml-6 list-decimal","children":["\n",["$","li",null,{"className":"mt-2","children":["Go to ",["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4","href":"https://console.upstash.com/kafka","children":"upstash"}]," and select your database."]}],"\n",["$","li",null,{"className":"mt-2","children":["Copy the ",["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","children":"REST API"}]," secrets at the bottom of the page"]}],"\n"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark","style":{"backgroundColor":"#24292e"},"tabIndex":"0","data-language":"typescript","data-theme":"default","children":["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","data-language":"typescript","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"import"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" { Kafka } "}],["$","span",null,{"style":{"color":"#F97583"},"children":"from"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"@upstash/kafka\""}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"kafka"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"new"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#B392F0"},"children":"Kafka"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  url: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"<UPSTASH_KAFKA_REST_URL>\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  username: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"<UPSTASH_KAFKA_REST_USERNAME>\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  password: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"<UPSTASH_KAFKA_REST_PASSWORD>\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"})"}]}]]}]}]}],"\n",["$","h2",null,{"className":"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0","id":"produce-a-single-message","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#produce-a-single-message","children":["$","span",null,{"className":"icon icon-link"}]}],"Produce a single message"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark","style":{"backgroundColor":"#24292e"},"tabIndex":"0","data-language":"typescript","data-theme":"default","children":["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","data-language":"typescript","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"p"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" kafka."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"producer"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"message"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" { hello: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"world\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" } "}],["$","span",null,{"style":{"color":"#6A737D"},"children":"// Objects will get serialized using `JSON.stringify`"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"res"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"await"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" p."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"produce"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"<my.topic>\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":", message)"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"res"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"await"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" p."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"produce"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"("}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"<my.topic>\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":", message, {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  partition: "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"1"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  timestamp: "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"12345"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  key: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"<custom key>\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  headers: [{ key: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"traceId\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":", value: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"85a9f12\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" }],"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"})"}]}]]}]}]}],"\n",["$","h2",null,{"className":"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0","id":"produce-multiple-messages","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#produce-multiple-messages","children":["$","span",null,{"className":"icon icon-link"}]}],"Produce multiple messages."]}],"\n",["$","p",null,{"className":"leading-7 [&:not(:first-child)]:mt-6","children":"The same options from the example above can be set for every message."}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark","style":{"backgroundColor":"#24292e"},"tabIndex":"0","data-language":"typescript","data-theme":"default","children":["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","data-language":"typescript","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"p"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" kafka."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"producer"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"res"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"await"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" p."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"produceMany"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"(["}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  {"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    topic: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"my.topic\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    value: { hello: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"world\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" },"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    "}],["$","span",null,{"style":{"color":"#6A737D"},"children":"// ...options"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  },"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  {"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    topic: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"another.topic\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    value: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"another message\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    "}],["$","span",null,{"style":{"color":"#6A737D"},"children":"// ...options"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  },"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"])"}]}]]}]}]}],"\n",["$","h2",null,{"className":"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0","id":"consume","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#consume","children":["$","span",null,{"className":"icon icon-link"}]}],"Consume"]}],"\n",["$","p",null,{"className":"leading-7 [&:not(:first-child)]:mt-6","children":"The first time a consumer is created, it needs to figure out the group\ncoordinator by asking the Kafka brokers and joins the consumer group. This\nprocess takes some time to complete. That's why when a consumer instance is\ncreated first time, it may return empty messages until consumer group\ncoordination is completed."}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark","style":{"backgroundColor":"#24292e"},"tabIndex":"0","data-language":"typescript","data-theme":"default","children":["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","data-language":"typescript","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"c"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" kafka."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"consumer"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"messages"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"await"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" c."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"consume"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  consumerGroupId: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"group_1\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  instanceId: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"instance_1\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  topics: ["}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"test.topic\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"],"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  autoOffsetReset: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"earliest\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"})"}]}]]}]}]}],"\n",["$","p",null,{"className":"leading-7 [&:not(:first-child)]:mt-6","children":["More examples can be found in the\n",["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4","href":"https://github.com/upstash/upstash-kafka/blob/main/pkg/consumer.ts#L265","children":"docstring"}]]}],"\n",["$","h2",null,{"className":"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0","id":"commit-manually","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#commit-manually","children":["$","span",null,{"className":"icon icon-link"}]}],"Commit manually"]}],"\n",["$","p",null,{"className":"leading-7 [&:not(:first-child)]:mt-6","children":["While ",["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","children":"consume"}]," can handle committing automatically, you can also use\n",["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","children":"Consumer.commit"}]," to manually commit."]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark","style":{"backgroundColor":"#24292e"},"tabIndex":"0","data-language":"typescript","data-theme":"default","children":["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","data-language":"typescript","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"consumerGroupId"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"mygroup\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"instanceId"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"myinstance\""}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"topic"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"my.topic\""}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"c"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" kafka."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"consumer"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"messages"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"await"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" c."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"consume"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  consumerGroupId,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  instanceId,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  topics: [topic],"}]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  autoCommit: "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"false"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"})"}]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"for"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" ("}],["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"message"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"of"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" messages) {"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  "}],["$","span",null,{"style":{"color":"#6A737D"},"children":"// message handling logic"}]]}],"\n",["$","span",null,{"data-line":"","children":" "}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  "}],["$","span",null,{"style":{"color":"#F97583"},"children":"await"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" c."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"commit"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    consumerGroupId,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    instanceId,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    offset: {"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"      topic: message.topic,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"      partition: message.partition,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"      offset: message.offset,"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"    },"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  })"}]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"}"}]}]]}]}]}],"\n",["$","h2",null,{"className":"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0","id":"fetch","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#fetch","children":["$","span",null,{"className":"icon icon-link"}]}],"Fetch"]}],"\n",["$","p",null,{"className":"leading-7 [&:not(:first-child)]:mt-6","children":["You can also manage offsets manually by using ",["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","children":"Consumer.fetch"}]]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark","style":{"backgroundColor":"#24292e"},"tabIndex":"0","data-language":"typescript","data-theme":"default","children":["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","data-language":"typescript","data-theme":"default","style":{"display":"grid"},"children":[["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"c"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" kafka."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"consumer"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"()"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#F97583"},"children":"const"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"messages"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"="}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#F97583"},"children":"await"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" c."}],["$","span",null,{"style":{"color":"#B392F0"},"children":"fetch"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":"({"}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  topic: "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"\"greeting\""}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  partition: "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"3"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  offset: "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"42"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#E1E4E8"},"children":"  timeout: "}],["$","span",null,{"style":{"color":"#79B8FF"},"children":"1000"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":","}]]}],"\n",["$","span",null,{"data-line":"","children":["$","span",null,{"style":{"color":"#E1E4E8"},"children":"})"}]}]]}]}]}],"\n",["$","h2",null,{"className":"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0","id":"examples","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#examples","children":["$","span",null,{"className":"icon icon-link"}]}],"Examples"]}],"\n",["$","p",null,{"className":"leading-7 [&:not(:first-child)]:mt-6","children":["See ",["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4","href":"https://github.com/upstash/upstash-kafka/tree/main/examples","children":"/examples"}]," as\nwell as various examples in the docstrings of each method."]}],"\n",["$","h1",null,{"className":"mt-2 scroll-m-20 text-4xl font-bold tracking-tight","id":"contributing","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#contributing","children":["$","span",null,{"className":"icon icon-link"}]}],"Contributing"]}],"\n",["$","h2",null,{"className":"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0","id":"requirements","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#requirements","children":["$","span",null,{"className":"icon icon-link"}]}],"Requirements"]}],"\n",["$","ul",null,{"className":"my-6 ml-6 list-disc","children":["\n",["$","li",null,{"className":"mt-2","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4","href":"https://nodejs.org","children":"nodejs"}]," v14.x or higher"]}],"\n",["$","li",null,{"className":"mt-2","children":["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4","href":"https://pnpm.io/installation","children":"pnpm"}]}],"\n"]}],"\n",["$","h2",null,{"className":"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0","id":"setup","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#setup","children":["$","span",null,{"className":"icon icon-link"}]}],"Setup"]}],"\n",["$","ol",null,{"className":"my-6 ml-6 list-decimal","start":"0","children":["\n",["$","li",null,{"className":"mt-2","children":["\n",["$","p",null,{"className":"leading-7 [&:not(:first-child)]:mt-6","children":["Install dependencies using ",["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","children":"pnpm install"}]]}],"\n"]}],"\n",["$","li",null,{"className":"mt-2","children":["\n",["$","p",null,{"className":"leading-7 [&:not(:first-child)]:mt-6","children":["Create a kafka instance on upstash.\n",["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4","href":"https://docs.upstash.com/kafka#create-a-kafka-cluster","children":"docs"}]]}],"\n"]}],"\n",["$","li",null,{"className":"mt-2","children":["\n",["$","p",null,{"className":"leading-7 [&:not(:first-child)]:mt-6","children":["Create the following topics: ",["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","children":"blue"}],", ",["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","children":"red"}],", ",["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","children":"green"}],".\n",["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4","href":"https://docs.upstash.com/kafka#create-a-topic","children":"docs"}]]}],"\n",["$","p",null,{"className":"leading-7 [&:not(:first-child)]:mt-6","children":"The partitions or retention settings don't matter at this time."}],"\n"]}],"\n",["$","li",null,{"className":"mt-2","children":["\n",["$","p",null,{"className":"leading-7 [&:not(:first-child)]:mt-6","children":["Create ",["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","children":".env"}]," file with your kafka secrets ",["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","children":"cp .env.example .env"}]]}],"\n"]}],"\n"]}],"\n",["$","h2",null,{"className":"mt-10 scroll-m-20 border-b border-b-zinc-800 pb-1 text-3xl font-semibold tracking-tight first:mt-0","id":"running-tests","children":[["$","$Ld",null,{"className":"font-medium text-zinc-900 underline underline-offset-4 subheading-anchor","aria-label":"Link to section","href":"#running-tests","children":["$","span",null,{"className":"icon icon-link"}]}],"Running tests"]}],"\n",["$","div",null,{"data-rehype-pretty-code-fragment":"","children":["$","pre",null,{"className":"mt-6 mb-4 overflow-x-auto rounded-lg bg-zinc-900 py-4 github-dark","style":{"backgroundColor":"#24292e"},"tabIndex":"0","data-language":"bash","data-theme":"default","children":["$","code",null,{"className":"relative rounded border bg-zinc-300 bg-opacity-25 py-[0.2rem] px-[0.3rem] font-mono text-sm text-zinc-600","data-language":"bash","data-theme":"default","style":{"display":"grid"},"children":["$","span",null,{"data-line":"","children":[["$","span",null,{"style":{"color":"#B392F0"},"children":"pnpm"}],["$","span",null,{"style":{"color":"#E1E4E8"},"children":" "}],["$","span",null,{"style":{"color":"#9ECBFF"},"children":"test"}]]}]}]}]}]]}]}]]}]
8:null
